"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9693],{9693:(e,s,a)=>{s.A=function(){let e=(0,o.useHasyx)(),{data:s,status:a}=(0,r.useSession)(),{isInTelegram:x,isLoading:u,user:h,platform:j,version:p,colorScheme:N,mainButton:f,backButton:g,showAlert:v,showConfirm:w,haptic:y}=(0,d.useTelegramWebApp)();return(0,t.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Telegram WebApp Integration"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Secure authentication and native Telegram WebApp features"})]}),(0,t.jsx)(n.TelegramWebAppAuth,{onSuccess:e=>{console.log("Authentication successful:",e)},onError:e=>{console.error("Authentication error:",e)},className:"max-w-md mx-auto"}),(0,t.jsxs)(i.Card,{className:"max-w-md mx-auto",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Info,{className:"h-5 w-5"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"Environment Info"})]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"In Telegram:"}),(0,t.jsx)(l.Badge,{variant:x?"default":"secondary",children:x?"Yes":"No"})]}),j&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Platform:"}),(0,t.jsx)(l.Badge,{variant:"outline",children:j})]}),p&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Version:"}),(0,t.jsx)(l.Badge,{variant:"outline",children:p})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Theme:"}),(0,t.jsx)(l.Badge,{variant:"outline",children:N})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:"Auth Status:"}),(0,t.jsx)(l.Badge,{variant:"authenticated"===a?"default":"secondary",children:a})]})]})]}),s&&h&&(0,t.jsxs)(i.Card,{className:"max-w-md mx-auto",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Smartphone,{className:"h-5 w-5"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"User Info"})]})}),(0,t.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[h.photo_url&&(0,t.jsx)("img",{src:h.photo_url,alt:"Avatar",className:"w-12 h-12 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium",children:[h.first_name," ",h.last_name||""]}),h.username&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",h.username]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ID: ",h.id]})]}),h.is_premium&&(0,t.jsx)(l.Badge,{variant:"secondary",children:"Premium"})]}),(0,t.jsxs)(c.Button,{onClick:()=>{var s,a,t,n;return s=this,a=void 0,t=void 0,n=function*(){(yield w("Are you sure you want to sign out?"))&&(y.impact("medium"),e.logout({callbackUrl:"/"}))},new(t||(t=Promise))(function(e,i){function l(e){try{r(n.next(e))}catch(e){i(e)}}function c(e){try{r(n.throw(e))}catch(e){i(e)}}function r(s){var a;s.done?e(s.value):((a=s.value)instanceof t?a:new t(function(e){e(a)})).then(l,c)}r((n=n.apply(s,a||[])).next())})},variant:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(m.LogOut,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]}),x&&(0,t.jsxs)(i.Card,{className:"max-w-md mx-auto",children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(m.Settings,{className:"h-5 w-5"}),(0,t.jsx)(i.CardTitle,{className:"text-lg",children:"WebApp Features"})]}),(0,t.jsx)(i.CardDescription,{children:"Test native Telegram WebApp functionality"})]}),(0,t.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,t.jsx)(c.Button,{onClick:()=>{f.setText("Loading..."),f.showProgress(),f.show(),setTimeout(()=>{f.hideProgress(),f.setText("Done!"),y.notification("success"),setTimeout(()=>{f.hide()},2e3)},3e3)},variant:"outline",size:"sm",className:"w-full",children:"Test Main Button"}),(0,t.jsx)(c.Button,{onClick:()=>{g.setOnClick(()=>{v("Back button clicked!"),g.hide()}),g.show()},variant:"outline",size:"sm",className:"w-full",children:"Test Back Button"}),(0,t.jsx)(c.Button,{onClick:()=>{y.impact("light"),setTimeout(()=>y.impact("medium"),200),setTimeout(()=>y.impact("heavy"),400),setTimeout(()=>y.notification("success"),600)},variant:"outline",size:"sm",className:"w-full",children:"Test Haptic Feedback"}),(0,t.jsx)(c.Button,{onClick:()=>v("Hello from Telegram WebApp!"),variant:"outline",size:"sm",className:"w-full",children:"Test Alert"})]})]}),(0,t.jsxs)(i.Card,{className:"max-w-2xl mx-auto",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"How to Use"})}),(0,t.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"For Development:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:'• Open this app in a regular browser to see the "Not in Telegram" state'}),(0,t.jsx)("li",{children:"• The app automatically detects the Telegram WebApp environment"}),(0,t.jsx)("li",{children:"• Mock data is used for testing outside of Telegram"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"For Production:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:"• Create a Telegram bot using @BotFather"}),(0,t.jsx)("li",{children:"• Set the Web App URL to your deployed application"}),(0,t.jsx)("li",{children:"• Configure TELEGRAM_LOGIN_BOT_TOKEN in environment variables"}),(0,t.jsx)("li",{children:"• Users can access the app through the bot's menu button"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Authentication Flow:"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,t.jsx)("li",{children:"• User opens the WebApp from Telegram"}),(0,t.jsx)("li",{children:"• initData is automatically validated on the server"}),(0,t.jsx)("li",{children:"• User account is created/linked in the database"}),(0,t.jsx)("li",{children:"• NextAuth session is established with Hasura claims"})]})]})]})]})]})};let t=a(95155),n=a(48589),i=a(53959),l=a(51364),c=a(51825),r=a(12108),d=a(24597),m=a(47937),o=a(259)}}]);