"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8787],{1130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.JwtDebugCard=function(){var e;let t=(0,m.useHasyx)(),{data:n}=(0,m.useSession)();(0,h.useJwt)();let x=(0,d.useTranslations)("jwt");(0,d.useTranslations)("common");let[g,f]=(0,p.useState)(""),[v,j]=(0,p.useState)(null),[b,C]=(0,p.useState)(!1),[y,w]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{let e=()=>{"undefined"!=typeof window&&j(localStorage.getItem("nextauth_jwt"))};e();let t=()=>e();return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[]),(0,r.jsxs)(s.Card,{children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{children:x("title")}),(0,r.jsx)(s.CardDescription,{children:x("description")})]}),(0,r.jsx)(s.CardContent,{children:(0,r.jsxs)(o.Tabs,{defaultValue:"login",children:[(0,r.jsxs)(o.TabsList,{className:"grid w-full grid-cols-3",children:[(0,r.jsx)(o.TabsTrigger,{value:"login",children:x("tabs.login")}),(0,r.jsx)(o.TabsTrigger,{value:"generate",children:x("tabs.generate")}),(0,r.jsx)(o.TabsTrigger,{value:"current",children:x("tabs.current")})]}),(0,r.jsx)(o.TabsContent,{value:"login",className:"mt-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Label,{htmlFor:"jwt-input",children:x("jwtToken")}),(0,r.jsx)(l.Input,{id:"jwt-input",type:"text",placeholder:x("placeholder"),value:g,onChange:e=>f(e.target.value),className:"mt-2"})]}),(0,r.jsx)(a.Button,{onClick:()=>{if(!g.trim())return void u.toast.error(x("enterToken"));try{localStorage.setItem("nextauth_jwt",g.trim()),j(g.trim()),u.toast.success(x("tokenSaved")),f("")}catch(e){u.toast.error(x("errorSaving"))}},disabled:b||!g.trim(),className:"w-full",children:b?x("loggingIn"):x("loginWithJwt")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:x("enterJwtToLogin")})]})}),(0,r.jsx)(o.TabsContent,{value:"generate",className:"mt-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:x("authStatus")}),(0,r.jsx)(c.CodeBlock,{value:n?x("authenticated"):x("notAuthenticated")})]}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:x("user")}),(0,r.jsx)(c.CodeBlock,{value:(null==(e=n.user)?void 0:e.email)||x("notSpecified")})]}),(0,r.jsx)(a.Button,{onClick:()=>{var e,r,s,a;return e=this,r=void 0,s=void 0,a=function*(){if(!n)return void u.toast.error(x("needAuth"));w(!0);try{let e=yield t.jwt();e?(yield navigator.clipboard.writeText(e),u.toast.success(x("copied"))):u.toast.error(x("failedGet"))}catch(e){u.toast.error(x("errorGetting"))}finally{w(!1)}},new(s||(s=Promise))(function(t,n){function l(e){try{o(a.next(e))}catch(e){n(e)}}function i(e){try{o(a.throw(e))}catch(e){n(e)}}function o(e){var n;e.done?t(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(l,i)}o((a=a.apply(e,r||[])).next())})},disabled:y||!n,className:"w-full",children:y?x("generating"):x("copyJwt")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:x("copyDescription")})]})}),(0,r.jsx)(o.TabsContent,{value:"current",className:"mt-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:x("jwtLocalStorage")}),(0,r.jsx)(c.CodeBlock,{value:v||x("notFound")})]}),v&&(0,r.jsx)(a.Button,{onClick:()=>{localStorage.removeItem("nextauth_jwt"),j(null),u.toast.success(x("removed"))},variant:"destructive",className:"w-full",children:x("clearJwt")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:x("updatedAutomatically")})]})})]})})]})};let r=n(95155),s=n(53959),a=n(51825),l=n(1035),i=n(34545),o=n(76862),c=n(88671),u=n(55428),d=n(259),h=n(5324),p=n(12115),m=n(259)},1184:(e,t,n)=>{n.r(t),n.d(t,{OTPInput:()=>x,OTPInputContext:()=>m,REGEXP_ONLY_CHARS:()=>j,REGEXP_ONLY_DIGITS:()=>v,REGEXP_ONLY_DIGITS_AND_CHARS:()=>b});var r=n(12115),s=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&u(e,n,t[n]);if(i)for(var n of i(t))c.call(t,n)&&u(e,n,t[n]);return e},h=(e,t)=>a(e,l(t)),p=(e,t)=>{var n={};for(var r in e)o.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&i)for(var r of i(e))0>t.indexOf(r)&&c.call(e,r)&&(n[r]=e[r]);return n},m=r.createContext({}),x=r.forwardRef((e,t)=>{var n,s,a,l,i,{value:o,onChange:c,maxLength:u,textAlign:x="left",pattern:v,placeholder:j,inputMode:b="numeric",onComplete:C,pushPasswordManagerStrategy:y="increase-width",pasteTransformer:w,containerClassName:S,noScriptCSSFallback:T=f,render:N,children:k}=e,O=p(e,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[E,P]=r.useState("string"==typeof O.defaultValue?O.defaultValue:""),_=null!=o?o:E,I=function(e){let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current}(_),A=r.useCallback(e=>{null==c||c(e),P(e)},[c]),L=r.useMemo(()=>v?"string"==typeof v?new RegExp(v):v:null,[v]),M=r.useRef(null),R=r.useRef(null),H=r.useRef({value:_,onChange:A,isIOS:"undefined"!=typeof window&&(null==(s=null==(n=null==window?void 0:window.CSS)?void 0:n.supports)?void 0:s.call(n,"-webkit-touch-callout","none"))}),D=r.useRef({prev:[null==(a=M.current)?void 0:a.selectionStart,null==(l=M.current)?void 0:l.selectionEnd,null==(i=M.current)?void 0:i.selectionDirection]});r.useImperativeHandle(t,()=>M.current,[]),r.useEffect(()=>{let e=M.current,t=R.current;if(!e||!t)return;function n(){if(document.activeElement!==e){U(null),V(null);return}let t=e.selectionStart,n=e.selectionEnd,r=e.selectionDirection,s=e.maxLength,a=e.value,l=D.current.prev,i=-1,o=-1,c;if(0!==a.length&&null!==t&&null!==n){let e=t===n,r=t===a.length&&a.length<s;if(e&&!r){if(0===t)i=0,o=1,c="forward";else if(t===s)i=t-1,o=t,c="backward";else if(s>1&&a.length>1){let e=0;if(null!==l[0]&&null!==l[1]){c=t<l[1]?"backward":"forward";let n=l[0]===l[1]&&l[0]<s;"backward"!==c||n||(e=-1)}i=e+t,o=e+t+1}}-1!==i&&-1!==o&&i!==o&&M.current.setSelectionRange(i,o,c)}let u=-1!==i?i:t,d=-1!==o?o:n,h=null!=c?c:r;U(u),V(d),D.current.prev=[u,d,h]}if(H.current.value!==e.value&&H.current.onChange(e.value),D.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",n,{capture:!0}),n(),document.activeElement===e&&W(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";g(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),g(e.sheet,`[data-input-otp]:autofill { ${t} }`),g(e.sheet,`[data-input-otp]:-webkit-autofill { ${t} }`),g(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),g(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let r=()=>{t&&t.style.setProperty("--root-height",`${e.clientHeight}px`)};r();let s=new ResizeObserver(r);return s.observe(e),()=>{document.removeEventListener("selectionchange",n,{capture:!0}),s.disconnect()}},[]);let[B,F]=r.useState(!1),[Q,W]=r.useState(!1),[G,U]=r.useState(null),[q,V]=r.useState(null);r.useEffect(()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}(()=>{var e,t,n,r;null==(e=M.current)||e.dispatchEvent(new Event("input"));let s=null==(t=M.current)?void 0:t.selectionStart,a=null==(n=M.current)?void 0:n.selectionEnd,l=null==(r=M.current)?void 0:r.selectionDirection;null!==s&&null!==a&&(U(s),V(a),D.current.prev=[s,a,l])})},[_,Q]),r.useEffect(()=>{void 0!==I&&_!==I&&I.length<u&&_.length===u&&(null==C||C(_))},[u,C,I,_]);let J=function({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:s}){let[a,l]=r.useState(!1),[i,o]=r.useState(!1),[c,u]=r.useState(!1),d=r.useMemo(()=>"none"!==n&&("increase-width"===n||"experimental-no-flickering"===n)&&a&&i,[a,i,n]),h=r.useCallback(()=>{let r=e.current,s=t.current;if(!r||!s||c||"none"===n)return;let a=r.getBoundingClientRect().left+r.offsetWidth,i=r.getBoundingClientRect().top+r.offsetHeight/2;0===document.querySelectorAll('[data-lastpass-icon-root],com-1password-button,[data-dashlanecreated],[style$="2147483647 !important;"]').length&&document.elementFromPoint(a-18,i)===r||(l(!0),u(!0))},[e,t,c,n]);return r.useEffect(()=>{let t=e.current;if(!t||"none"===n)return;function r(){o(window.innerWidth-t.getBoundingClientRect().right>=40)}r();let s=setInterval(r,1e3);return()=>{clearInterval(s)}},[e,n]),r.useEffect(()=>{let e=s||document.activeElement===t.current;if("none"===n||!e)return;let r=setTimeout(h,0),a=setTimeout(h,2e3),l=setTimeout(h,5e3),i=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(r),clearTimeout(a),clearTimeout(l),clearTimeout(i)}},[t,s,n,h]),{hasPWMBadge:a,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:R,inputRef:M,pushPasswordManagerStrategy:y,isFocused:Q}),z=r.useCallback(e=>{let t=e.currentTarget.value.slice(0,u);if(t.length>0&&L&&!L.test(t))return void e.preventDefault();"string"==typeof I&&t.length<I.length&&document.dispatchEvent(new Event("selectionchange")),A(t)},[u,A,I,L]),K=r.useCallback(()=>{var e;if(M.current){let t=Math.min(M.current.value.length,u-1),n=M.current.value.length;null==(e=M.current)||e.setSelectionRange(t,n),U(t),V(n)}W(!0)},[u]),Y=r.useCallback(e=>{var t,n;let r=M.current;if(!w&&(!H.current.isIOS||!e.clipboardData||!r))return;let s=e.clipboardData.getData("text/plain"),a=w?w(s):s;e.preventDefault();let l=null==(t=M.current)?void 0:t.selectionStart,i=null==(n=M.current)?void 0:n.selectionEnd,o=(l!==i?_.slice(0,l)+a+_.slice(i):_.slice(0,l)+a+_.slice(l)).slice(0,u);if(o.length>0&&L&&!L.test(o))return;r.value=o,A(o);let c=Math.min(o.length,u-1),d=o.length;r.setSelectionRange(c,d),U(c),V(d)},[u,A,L,_]),$=r.useMemo(()=>({position:"relative",cursor:O.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[O.disabled]),X=r.useMemo(()=>({position:"absolute",inset:0,width:J.willPushPWMBadge?`calc(100% + ${J.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:J.willPushPWMBadge?`inset(0 ${J.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:x,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[J.PWM_BADGE_SPACE_WIDTH,J.willPushPWMBadge,x]),Z=r.useMemo(()=>r.createElement("input",h(d({autoComplete:O.autoComplete||"one-time-code"},O),{"data-input-otp":!0,"data-input-otp-placeholder-shown":0===_.length||void 0,"data-input-otp-mss":G,"data-input-otp-mse":q,inputMode:b,pattern:null==L?void 0:L.source,"aria-placeholder":j,style:X,maxLength:u,value:_,ref:M,onPaste:e=>{var t;Y(e),null==(t=O.onPaste)||t.call(O,e)},onChange:z,onMouseOver:e=>{var t;F(!0),null==(t=O.onMouseOver)||t.call(O,e)},onMouseLeave:e=>{var t;F(!1),null==(t=O.onMouseLeave)||t.call(O,e)},onFocus:e=>{var t;K(),null==(t=O.onFocus)||t.call(O,e)},onBlur:e=>{var t;W(!1),null==(t=O.onBlur)||t.call(O,e)}})),[z,K,Y,b,X,u,q,G,O,null==L?void 0:L.source,_]),ee=r.useMemo(()=>({slots:Array.from({length:u}).map((e,t)=>{var n;let r=Q&&null!==G&&null!==q&&(G===q&&t===G||t>=G&&t<q),s=void 0!==_[t]?_[t]:null;return{char:s,placeholderChar:void 0!==_[0]?null:null!=(n=null==j?void 0:j[t])?n:null,isActive:r,hasFakeCaret:r&&null===s}}),isFocused:Q,isHovering:!O.disabled&&B}),[Q,B,u,q,G,O.disabled,_]),et=r.useMemo(()=>N?N(ee):r.createElement(m.Provider,{value:ee},k),[k,ee,N]);return r.createElement(r.Fragment,null,null!==T&&r.createElement("noscript",null,r.createElement("style",null,T)),r.createElement("div",{ref:R,"data-input-otp-container":!0,style:$,className:S},et,r.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Z)))});function g(e,t){try{e.insertRule(t)}catch(e){console.error("input-otp could not insert CSS rule:",t)}}x.displayName="Input";var f=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`,v="^\\d+$",j="^[a-zA-Z]+$",b="^[a-zA-Z0-9]+$"},2569:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useCheckConnection=l;let r=n(12115),s=n(35484),a=(0,function(e){return e&&e.__esModule?e:{default:e}}(n(74684)).default)("hooks:connection");function l(){let[e,t]=(0,r.useState)("connecting");return(0,r.useEffect)(()=>{var e,n,r,l;let i=!0;return e=this,n=void 0,r=void 0,l=function*(){try{i&&t("connecting");let e=(0,s.getClient)(),n=yield(0,s.checkConnection)(e);if(!i)return;n?(a("hooks:connection","✅ Connected to Hasura GraphQL endpoint"),t("connected")):(a("hooks:connection","❌ Failed to connect to Hasura GraphQL endpoint"),t("error"))}catch(e){i&&(a("hooks:connection","❌ Connection error:",e),t("error"))}},new(r||(r=Promise))(function(t,s){function a(e){try{o(l.next(e))}catch(e){s(e)}}function i(e){try{o(l.throw(e))}catch(e){s(e)}}function o(e){var n;e.done?t(e.value):((n=e.value)instanceof r?n:new r(function(e){e(n)})).then(a,i)}o((l=l.apply(e,n||[])).next())}),()=>{i=!1}},[]),e}t.default=l},9859:(e,t,n)=>{var r=function(e,t,n,r){return new(n||(n=Promise))(function(s,a){function l(e){try{o(r.next(e))}catch(e){a(e)}}function i(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,i)}o((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.CredentialsSignInCard=function(e){let t=(0,m.useTranslations)("auth"),n=(0,m.useTranslations)("common"),g=(0,m.useTranslations)("forms");(0,x.useJwt)();let[f,v]=(0,p.useState)("email"),[j,b]=(0,p.useState)(""),[C,y]=(0,p.useState)(""),[w,S]=(0,p.useState)(""),[T,N]=(0,p.useState)(null),[k,O]=(0,p.useState)(null),[E,P]=(0,p.useState)(!1),[_,I]=(0,p.useState)(null),[A,L]=(0,p.useState)("");return(0,s.jsxs)(l.Card,Object.assign({},e,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsxs)(l.CardTitle,{className:"text-2xl flex items-center gap-2",children:[(0,s.jsx)(d.KeyRound,{className:"h-6 w-6"}),t("signIn")]}),(0,s.jsx)(l.CardDescription,{children:t("signInToYourAccount")})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)(o.Tabs,{value:f,onValueChange:e=>v(e),children:[(0,s.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(o.TabsTrigger,{value:"email",children:"Email"}),(0,s.jsx)(o.TabsTrigger,{value:"phone",children:"Phone"})]}),(0,s.jsxs)(o.TabsContent,{value:"email",className:"mt-4 grid gap-2",children:[(0,s.jsx)(u.Label,{htmlFor:"email",children:g("labels.email")}),(0,s.jsx)(i.Input,{id:"email",type:"email",placeholder:"m@example.com",value:j,onChange:e=>b(e.target.value),disabled:E||!!_,required:!0})]}),(0,s.jsxs)(o.TabsContent,{value:"phone",className:"mt-4 grid gap-2",children:[(0,s.jsx)(u.Label,{htmlFor:"phone",children:"Phone"}),(0,s.jsx)(i.Input,{id:"phone",type:"tel",placeholder:"+15551234567",value:C,onChange:e=>y(e.target.value),disabled:E||!!_,required:!0})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(u.Label,{htmlFor:"password",children:g("labels.password")})}),(0,s.jsx)(i.Input,{id:"password",type:"password",value:w,onChange:e=>S(e.target.value),disabled:E||!!_,required:!0})]}),_?(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(u.Label,{children:"Enter verification code"}),(0,s.jsx)(c.InputOTP,{maxLength:6,value:A,onChange:L,onComplete:e=>r(this,void 0,void 0,function*(){if(_&&6===e.length){P(!0);try{let t=yield fetch("/api/auth/credentials/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({attemptId:_,code:e,password:w})}),n=yield t.json();if(!t.ok)throw Error(n.error||"Failed to verify");let r=yield(0,h.signIn)("credentials",{redirect:!1,userId:n.userId});(null==r?void 0:r.error)?N(r.error):window.location.reload()}catch(e){console.error(e),N((null==e?void 0:e.message)||"Verification failed")}finally{P(!1)}}}),children:(0,s.jsxs)(c.InputOTPGroup,{children:[(0,s.jsx)(c.InputOTPSlot,{index:0}),(0,s.jsx)(c.InputOTPSlot,{index:1}),(0,s.jsx)(c.InputOTPSlot,{index:2}),(0,s.jsx)(c.InputOTPSlot,{index:3}),(0,s.jsx)(c.InputOTPSlot,{index:4}),(0,s.jsx)(c.InputOTPSlot,{index:5})]})})]}):null,T&&(0,s.jsx)("div",{className:"text-red-500 text-sm",children:T}),k&&(0,s.jsx)("div",{className:"text-blue-500 text-sm",children:k}),!_&&(0,s.jsx)(a.Button,{type:"button",className:"w-full",onClick:()=>r(this,void 0,void 0,function*(){N(null),O(null),P(!0);try{let e="email"===f?j:C,t=yield fetch("/api/auth/credentials/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:f,identifier:e})}),n=yield t.json();if(!t.ok)throw Error(n.error||"Failed to start");I(n.attemptId),O("Code sent. Enter it below.")}catch(e){console.error("Credentials sign-in error:",e),N("An error occurred during sign-in")}finally{P(!1)}}),disabled:E,children:E?n("loading"):"Send code"})]})})]}))};let s=n(95155),a=n(51825),l=n(53959),i=n(1035),o=n(76862),c=n(19887),u=n(34545),d=n(47937),h=n(12108),p=n(12115),m=n(259),x=n(5324)},12634:(e,t,n)=>{var r=function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthActionsCard=function(e){var t,n,r,m,g,f;let v=(0,d.useHasyx)(),j=(0,x.useTranslations)("auth"),b=(0,x.useTranslations)("common");(0,x.useTranslations)("actions");let C=(0,x.useTranslations)("errors"),{data:y,status:w}=(0,d.useSession)(),S="loading"===w,T=null==(t=null==y?void 0:y.user)?void 0:t.id,{data:N,loading:k,error:O}=(0,d.useSubscription)({table:"users",where:{id:{_eq:T}},returning:["email_verified"]},{role:"me",skip:!T}),E=null==(r=null==(n=null==N?void 0:N.users)?void 0:n[0])?void 0:r.email_verified;return(null==v?void 0:v.userId)&&!S?(0,s.jsxs)(l.Card,Object.assign({},e,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:j("connectedAccounts")}),(0,s.jsx)(l.CardDescription,{children:j("addAccountDescription")})]}),(0,s.jsx)(l.CardContent,{children:(0,s.jsxs)(i.Tabs,{defaultValue:"auth",children:[(0,s.jsxs)(i.TabsList,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(i.TabsTrigger,{value:"auth",children:"Auth"}),(0,s.jsx)(i.TabsTrigger,{value:"accounts",children:j("connectedAccounts")})]}),(0,s.jsxs)(i.TabsContent,{value:"auth",className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,s.jsx)(o.Label,{children:"Client Session Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap",children:[T&&(0,s.jsxs)("span",{className:"flex items-center",children:[k&&(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),O&&(0,s.jsx)("span",{className:"text-xs text-red-500",title:O.message,children:C("unknown")}),!k&&!O&&E&&(0,s.jsxs)("span",{title:"Email verified at ".concat(new Date(E).toLocaleString()),className:"mr-2 px-2 py-0.5 rounded text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 flex items-center",children:[(0,s.jsx)(c.MailCheck,{className:"mr-1 h-3 w-3"})," ",b("yes")]}),!k&&!O&&!E&&(0,s.jsxs)("span",{title:C("unknown"),className:"mr-2 px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200 flex items-center",children:[(0,s.jsx)(c.MailWarning,{className:"mr-1 h-3 w-3"})," ",b("no")]})]}),(null==(m=null==y?void 0:y.user)?void 0:m.image)&&(0,s.jsx)(u.default,{src:null==y?void 0:y.user.image,alt:(null==y?void 0:y.user.name)||"User avatar",width:24,height:24,className:"rounded-full"}),(0,s.jsxs)("span",{children:[(null==(g=null==y?void 0:y.user)?void 0:g.name)||(null==(f=null==y?void 0:y.user)?void 0:f.email)," ",(null==y?void 0:y.provider)?"(".concat(y.provider,")"):""]})]})]}),(0,s.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,s.jsx)(o.Label,{children:j("signOut")}),(0,s.jsxs)(a.Button,{onClick:()=>{var e,t,n,r;return e=this,t=void 0,n=void 0,r=function*(){v.logout()},new(n||(n=Promise))(function(s,a){function l(e){try{o(r.next(e))}catch(e){a(e)}}function i(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,i)}o((r=r.apply(e,t||[])).next())})},disabled:S,children:[(0,s.jsx)(c.LogOut,{className:"mr-2 h-4 w-4"})," ",j("signOut")]})]})]}),(0,s.jsx)(i.TabsContent,{value:"accounts",className:"mt-4",children:(0,s.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:(0,s.jsx)(p.Accounts,{userId:T})})})]})})]})):(0,s.jsxs)(l.Card,Object.assign({},e,{children:[(0,s.jsxs)(l.CardHeader,{children:[(0,s.jsx)(l.CardTitle,{children:j("connectedAccounts")}),(0,s.jsx)(l.CardDescription,{children:j("signInToYourAccount")})]}),(0,s.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,s.jsx)(o.Label,{children:j("signInToYourAccount")}),S&&(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(c.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),b("loading")]}),!y&&!S&&(0,s.jsx)("p",{children:j("signIn")})]}),(0,s.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,s.jsx)(o.Label,{children:j("signIn")}),(0,s.jsx)(h.OAuthButtons,{})]})]})]}))};let s=n(95155),a=n(51825),l=n(53959),i=n(76862),o=n(34545),c=n(47937),u=r(n(66766)),d=n(259),h=n(5716),p=n(26589),m=r(n(74684)),x=n(259);(0,m.default)("auth:actions-card")},19887:(e,t,n)=>{var r=Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},s=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},a=function(){var e=function(t){return(e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t})(t)};return function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var a=e(t),l=0;l<a.length;l++)"default"!==a[l]&&r(n,t,a[l]);return s(n,t),n}}(),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.InputOTP=function(e){var{className:t,containerClassName:n}=e,r=l(e,["className","containerClassName"]);return(0,i.jsx)(c.OTPInput,Object.assign({"data-slot":"input-otp",containerClassName:(0,d.cn)("flex items-center gap-2 has-disabled:opacity-50",n),className:(0,d.cn)("disabled:cursor-not-allowed",t)},r))},t.InputOTPGroup=function(e){var{className:t}=e,n=l(e,["className"]);return(0,i.jsx)("div",Object.assign({"data-slot":"input-otp-group",className:(0,d.cn)("flex items-center",t)},n))},t.InputOTPSlot=function(e){var t,{index:n,className:r}=e,s=l(e,["index","className"]);let a=o.useContext(c.OTPInputContext),{char:u,hasFakeCaret:h,isActive:p}=null!=(t=null==a?void 0:a.slots[n])?t:{};return(0,i.jsxs)("div",Object.assign({"data-slot":"input-otp-slot","data-active":p,className:(0,d.cn)("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",r)},s,{children:[u,h&&(0,i.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]}))},t.InputOTPSeparator=function(e){var t=l(e,[]);return(0,i.jsx)("div",Object.assign({"data-slot":"input-otp-separator",role:"separator"},t,{children:(0,i.jsx)(u.MinusIcon,{})}))};let i=n(95155),o=a(n(12115)),c=n(1184),u=n(47937),d=n(27010)},24646:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Status=function(e){let{status:t="connecting",label:n,error:i}=e,o=(0,a.useTranslations)("common"),c=n||o("loading"),u=n||o("yes"),d=n||o("error"),h=n||"Idle";return(0,r.jsxs)(r.Fragment,{children:["connecting"===t&&(0,r.jsxs)(s.Button,{variant:"ghost",className:"p-0",children:[(0,r.jsx)(l.Loader2,{className:"animate-spin mr-1"})," ",c]}),"connected"===t&&(0,r.jsxs)(s.Button,{variant:"ghost",className:"p-0",children:[(0,r.jsx)(l.Check,{className:"mr-1"})," ",u]}),"error"===t&&(0,r.jsxs)(s.Button,{variant:"ghost",className:"p-0",children:[(0,r.jsx)(l.X,{className:"mr-1"})," ",d]}),"idle"===t&&(0,r.jsxs)(s.Button,{variant:"ghost",className:"p-0",children:[(0,r.jsx)(l.X,{className:"mr-1"})," ",h]})]})};let r=n(95155),s=n(51825),a=n(259),l=n(47937)},35212:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCard=function(e){let{serverSession:t}=e,n=(0,u.useTranslations)("session");return(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{children:n("title")}),(0,r.jsx)(a.CardDescription,{children:n("description")})]}),(0,r.jsx)(a.CardContent,{children:(0,r.jsxs)(s.Tabs,{defaultValue:"ssr",children:[(0,r.jsxs)(s.TabsList,{className:"grid w-full grid-cols-4",children:[(0,r.jsx)(s.TabsTrigger,{value:"ssr",children:n("tabs.ssr")}),(0,r.jsx)(s.TabsTrigger,{value:"get",children:n("tabs.get")}),(0,r.jsx)(s.TabsTrigger,{value:"socket",children:n("tabs.socket")}),(0,r.jsx)(s.TabsTrigger,{value:"hasyx",children:n("tabs.hasyx")})]}),(0,r.jsx)(s.TabsContent,{value:"ssr",className:"mt-4",children:(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{className:"text-lg",children:n("ssr.title")}),(0,r.jsx)(a.CardDescription,{children:n("ssr.description")})]}),(0,r.jsx)(a.CardContent,{children:t?(0,r.jsx)(l.CodeBlock,{value:JSON.stringify(t,null,2)}):(0,r.jsx)("p",{children:n("ssr.empty")})})]})}),(0,r.jsx)(s.TabsContent,{value:"get",className:"mt-4",children:(0,r.jsx)(i.GetAuthStatus,{})}),(0,r.jsx)(s.TabsContent,{value:"socket",className:"mt-4",children:(0,r.jsx)(o.SocketAuthStatus,{})}),(0,r.jsx)(s.TabsContent,{value:"hasyx",className:"mt-4",children:(0,r.jsx)(d,{})})]})})]})};let r=n(95155),s=n(76862),a=n(53959),l=n(88671),i=n(63477),o=n(41130),c=n(259),u=n(259);function d(){let e=(0,c.useHasyx)(),t=(0,u.useTranslations)("session");return(0,r.jsxs)(a.Card,{children:[(0,r.jsxs)(a.CardHeader,{children:[(0,r.jsx)(a.CardTitle,{className:"text-lg",children:t("hasyx.title")}),(0,r.jsx)(a.CardDescription,{children:t("hasyx.description")})]}),(0,r.jsx)(a.CardContent,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:t("hasyx.userId")}),(0,r.jsx)(l.CodeBlock,{value:e.userId||"null"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium mb-2",children:t("hasyx.user")}),(0,r.jsx)(l.CodeBlock,{value:JSON.stringify(e.user,null,2)})]})]})})]})}},38284:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsersQuery=function(){let e=(0,c.useTranslations)("usersList"),{data:t=[],loading:n,error:o}=(0,a.useQuery)({table:"users",limit:5,returning:["id","created_at","updated_at"]},{role:"anonymous"});return u("Query state:",{loading:n,error:o,data:t}),(0,r.jsxs)(s.Card,{children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{className:"text-lg",children:e("query.title")}),(0,r.jsx)(s.CardDescription,{children:e("query.description")})]}),(0,r.jsxs)(s.CardContent,{children:[n&&(0,r.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,r.jsx)(l.Loader2,{className:"mr-2 h-5 w-5 animate-spin"})," ",e("loading")]}),o&&(0,r.jsxs)(i.Alert,{variant:"destructive",children:[(0,r.jsx)(l.Terminal,{className:"h-4 w-4"}),(0,r.jsx)(i.AlertTitle,{children:e("query.errorTitle")}),(0,r.jsx)(i.AlertDescription,{children:o.message||e("query.errorDescription")})]}),!n&&!o&&!!(null==t?void 0:t.length)&&(0,r.jsx)("ul",{className:"space-y-2",children:t.map(t=>(0,r.jsxs)("li",{className:"text-sm p-2 border rounded bg-muted/40",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"ID:"})," ",t.id]}),t.name&&(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[e("name"),":"]})," ",t.name]}),t.email&&(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[e("email"),":"]})," ",t.email]})]},t.id))}),!n&&!o&&!(null==t?void 0:t.length)&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e("empty")})]})]})};let r=n(95155),s=n(53959),a=n(259),l=n(47937),i=n(28629),o=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),c=n(259),u=(0,o.default)("users-query")},41130:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SocketAuthStatus=function(){let e,t=(0,u.useTranslations)("authStatus"),[n,c]=(0,s.useState)("idle"),[p,m]=(0,s.useState)(null),[x,g]=(0,s.useState)(null),f=(0,s.useRef)(null),v=()=>{let e=(0,d.url)("ws","https://badma-dev.deep.foundation","/api/auth");h("Attempting to connect WebSocket: ".concat(e)),c("connecting"),g(null),m(null),f.current&&f.current.readyState!==WebSocket.CLOSED&&(h("Closing previous WebSocket connection."),f.current.close());try{f.current=new WebSocket(e),f.current.onopen=()=>{h("WebSocket connection opened."),c("connected")},f.current.onmessage=e=>{try{let t=JSON.parse(e.data.toString());h("WebSocket message received:",t),"auth_status"===t.type?m(t):"auth_error"===t.type&&(g(Error(t.message||"Authentication error from server")),c("error"))}catch(t){h("Error parsing WebSocket message:",t,"Raw data:",e.data),g(Error("Failed to parse message from server")),c("error")}},f.current.onerror=e=>{h("WebSocket error:",e),g(Error("WebSocket connection error")),c("error")},f.current.onclose=e=>{h("WebSocket connection closed. Code: ".concat(e.code,", Reason: ").concat(e.reason)),"error"!==n&&c("idle")}}catch(e){h("Failed to initialize WebSocket:",e),g(e),c("error")}};return(0,s.useEffect)(()=>(v(),()=>{f.current&&(h("Closing WebSocket connection on component unmount."),f.current.close())}),[]),e="connecting"===n?"connecting":"error"===n?"error":"connected"===n?"connected":"idle",(0,r.jsxs)(a.Card,{children:[(0,r.jsx)(a.CardHeader,{children:(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)(a.CardTitle,{className:"text-lg",children:t("ws.title")}),(0,r.jsx)(a.CardDescription,{children:t("ws.description")})]})})}),(0,r.jsxs)(a.CardContent,{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.Label,{children:t("ws.connection")}),(0,r.jsx)(i.Status,{status:e,error:x})]}),"connected"===n&&p&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{children:t("ws.authStatus")}),(0,r.jsx)("p",{className:"text-sm ".concat(p.authenticated?"text-green-600":"text-red-600"),children:t(p.authenticated?"authenticated":"notAuthenticated")})]}),"connected"===n&&(null==p?void 0:p.authenticated)&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{children:t("ws.userData")}),(0,r.jsx)(o.CodeBlock,{value:JSON.stringify({userId:p.userId,token:p.token},null,2)})]}),"error"===n&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{className:"text-red-500",children:t("ws.connError")}),(0,r.jsx)(o.CodeBlock,{value:(null==x?void 0:x.message)||t("unknownWsError")})]}),"idle"===n&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:t("ws.idle")})]})]})};let r=n(95155),s=n(12115),a=n(53959),l=n(34545),i=n(24646),o=n(88671),c=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),u=n(259),d=n(7546),h=(0,c.default)("auth:socket-status")},48787:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{serverSession:t,sidebarData:n}=e;return(0,r.jsxs)(s.SidebarLayout,{sidebarData:n,breadcrumb:[{title:"Hasyx",link:"/"},{title:"Diagnostics",link:"/hasyx/diagnostics"}],children:[(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:[(0,r.jsxs)("div",{className:"grid auto-rows-min gap-4 md:grid-cols-2",children:[(0,r.jsx)(c.HasuraCard,{}),(0,r.jsx)(u.ProxyCard,{}),(0,r.jsx)(l.CredentialsSignInCard,{}),(0,r.jsx)(a.AuthActionsCard,{}),(0,r.jsx)(i.SessionCard,{serverSession:t}),(0,r.jsx)(o.JwtDebugCard,{}),(0,r.jsx)(h.NotificationCard,{}),(0,r.jsx)(d.UsersCard,{})]}),(0,r.jsxs)("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[(0,r.jsx)("div",{className:"aspect-video rounded-xl bg-muted/50"}),(0,r.jsx)("div",{className:"aspect-video rounded-xl bg-muted/50"}),(0,r.jsx)("div",{className:"aspect-video rounded-xl bg-muted/50"})]}),(0,r.jsx)("div",{className:"min-h-[100vh] flex-1 rounded-xl bg-muted/50 md:min-h-min"})]}),(0,r.jsx)(p.Toaster,{})]})};let r=n(95155),s=n(2693),a=n(12634),l=n(9859),i=n(35212),o=n(1130),c=n(89391),u=n(72905),d=n(78122),h=n(52687),p=n(62400)},58753:(e,t,n)=>{n.r(t),n.d(t,{ApolloCache:()=>r.ApolloCache,ApolloClient:()=>r.ApolloClient,ApolloConsumer:()=>s.ApolloConsumer,ApolloError:()=>r.ApolloError,ApolloLink:()=>r.ApolloLink,ApolloProvider:()=>s.ApolloProvider,Cache:()=>r.Cache,DocumentTransform:()=>r.DocumentTransform,DocumentType:()=>s.DocumentType,HttpLink:()=>r.HttpLink,InMemoryCache:()=>r.InMemoryCache,MissingFieldError:()=>r.MissingFieldError,NetworkStatus:()=>r.NetworkStatus,Observable:()=>r.Observable,ObservableQuery:()=>r.ObservableQuery,checkFetcher:()=>r.checkFetcher,concat:()=>r.concat,createHttpLink:()=>r.createHttpLink,createQueryPreloader:()=>s.createQueryPreloader,createSignalIfSupported:()=>r.createSignalIfSupported,defaultDataIdFromObject:()=>r.defaultDataIdFromObject,defaultPrinter:()=>r.defaultPrinter,disableExperimentalFragmentVariables:()=>r.disableExperimentalFragmentVariables,disableFragmentWarnings:()=>r.disableFragmentWarnings,empty:()=>r.empty,enableExperimentalFragmentVariables:()=>r.enableExperimentalFragmentVariables,execute:()=>r.execute,fallbackHttpConfig:()=>r.fallbackHttpConfig,from:()=>r.from,fromError:()=>r.fromError,fromPromise:()=>r.fromPromise,getApolloContext:()=>s.getApolloContext,gql:()=>r.gql,isApolloError:()=>r.isApolloError,isNetworkRequestSettled:()=>r.isNetworkRequestSettled,isReference:()=>r.isReference,makeReference:()=>r.makeReference,makeVar:()=>r.makeVar,mergeOptions:()=>r.mergeOptions,operationName:()=>s.operationName,parseAndCheckHttpResponse:()=>r.parseAndCheckHttpResponse,parser:()=>s.parser,resetApolloContext:()=>s.resetApolloContext,resetCaches:()=>r.resetCaches,rewriteURIForGET:()=>r.rewriteURIForGET,selectHttpOptionsAndBody:()=>r.selectHttpOptionsAndBody,selectHttpOptionsAndBodyInternal:()=>r.selectHttpOptionsAndBodyInternal,selectURI:()=>r.selectURI,serializeFetchParameter:()=>r.serializeFetchParameter,setLogVerbosity:()=>r.setLogVerbosity,skipToken:()=>s.skipToken,split:()=>r.split,throwServerError:()=>r.throwServerError,toPromise:()=>r.toPromise,useApolloClient:()=>s.useApolloClient,useBackgroundQuery:()=>s.useBackgroundQuery,useFragment:()=>s.useFragment,useLazyQuery:()=>s.useLazyQuery,useLoadableQuery:()=>s.useLoadableQuery,useMutation:()=>s.useMutation,useQuery:()=>s.useQuery,useQueryRefHandlers:()=>s.useQueryRefHandlers,useReactiveVar:()=>s.useReactiveVar,useReadQuery:()=>s.useReadQuery,useSubscription:()=>s.useSubscription,useSuspenseFragment:()=>s.useSuspenseFragment,useSuspenseQuery:()=>s.useSuspenseQuery});var r=n(5359),s=n(55012)},62400:(e,t,n)=>{var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};Object.defineProperty(t,"__esModule",{value:!0}),t.Toaster=void 0;let s=n(95155),a=n(49147),l=n(55428);t.Toaster=e=>{var t=r(e,[]);let{theme:n="system"}=(0,a.useTheme)();return(0,s.jsx)(l.Toaster,Object.assign({theme:n,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"}},t))}},63477:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GetAuthStatus=function(){let e,t=(0,u.useTranslations)("authStatus"),[n,h]=(0,s.useState)("idle"),[x,g]=(0,s.useState)(null),[f,v]=(0,s.useState)(null),j=()=>{var e,t,n,r;return e=this,t=void 0,n=void 0,r=function*(){m("GET /api/auth: Fetching status..."),h("loading"),v(null),g(null);try{let e=yield fetch((0,p.url)(window.location.protocol,p.API_URL,"/api/auth"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=yield e.json();m("GET /api/auth: Fetch successful",t),g(t),h("success")}catch(e){m("GET /api/auth: Fetch error:",e),v(e),h("error")}},new(n||(n=Promise))(function(s,a){function l(e){try{o(r.next(e))}catch(e){a(e)}}function i(e){try{o(r.throw(e))}catch(e){a(e)}}function o(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,i)}o((r=r.apply(e,t||[])).next())})};return(0,s.useEffect)(()=>{j()},[]),e="loading"===n?"connecting":"error"===n?"error":"success"===n&&(null==x?void 0:x.authenticated)?"connected":"idle",(0,r.jsxs)(a.Card,{children:[(0,r.jsx)(a.CardHeader,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.CardTitle,{className:"text-lg",children:t("get.title")}),(0,r.jsx)(a.CardDescription,{children:t("get.description")})]}),(0,r.jsx)(c.Button,{variant:"ghost",size:"icon",onClick:j,disabled:"loading"===n,"aria-label":"Refresh GET status",children:(0,r.jsx)(d.RefreshCw,{className:"h-4 w-4 ".concat("loading"===n?"animate-spin":"")})})]})}),(0,r.jsxs)(a.CardContent,{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.Label,{children:t("get.requestStatus")}),(0,r.jsx)(i.Status,{status:e,label:"success"!==n||(null==x?void 0:x.authenticated)?void 0:t("get.successUnauth"),error:f})]}),"success"===n&&(null==x?void 0:x.authenticated)&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{children:t("get.decodedJwt")}),(0,r.jsx)(o.CodeBlock,{value:JSON.stringify(x.token,null,2)})]}),"error"===n&&(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{className:"text-red-500",children:t("get.fetchError")}),(0,r.jsx)(o.CodeBlock,{value:(null==f?void 0:f.message)||t("unknownFetchError")})]}),"success"===n&&!(null==x?void 0:x.authenticated)&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:t("get.notAuthenticated")})]})]})};let r=n(95155),s=n(12115),a=n(53959),l=n(34545),i=n(24646),o=n(88671),c=n(51825),u=n(259),d=n(47937),h=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),p=n(7546),m=(0,h.default)("auth:get-status")},63985:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsersSubscription=function(){let e=(0,c.useTranslations)("usersList"),{data:t=[],loading:n,error:o}=(0,a.useSubscription)({table:"users",limit:5,returning:["id","created_at","updated_at"]},{role:"anonymous"});return u("Subscription state:",{loading:n,error:o,data:t}),(0,r.jsxs)(s.Card,{children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{className:"text-lg",children:e("subscription.title")}),(0,r.jsx)(s.CardDescription,{children:e("subscription.description")})]}),(0,r.jsxs)(s.CardContent,{children:[n&&(0,r.jsxs)("div",{className:"flex items-center justify-center p-4",children:[(0,r.jsx)(l.Loader2,{className:"mr-2 h-5 w-5 animate-spin"})," ",e("loading")]}),o&&(0,r.jsxs)(i.Alert,{variant:"destructive",children:[(0,r.jsx)(l.Terminal,{className:"h-4 w-4"}),(0,r.jsx)(i.AlertTitle,{children:e("subscription.errorTitle")}),(0,r.jsx)(i.AlertDescription,{children:o.message||e("subscription.errorDescription")})]}),!n&&!o&&!!(null==t?void 0:t.length)&&(0,r.jsx)("ul",{className:"space-y-2",children:null==t?void 0:t.map(t=>(0,r.jsxs)("li",{className:"text-sm p-2 border rounded bg-muted/40",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"ID:"})," ",t.id]}),t.name&&(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[e("name"),":"]})," ",t.name]}),t.email&&(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:[e("email"),":"]})," ",t.email]})]},t.id))}),!n&&!o&&!(null==t?void 0:t.length)&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e("empty")})]})]})};let r=n(95155),s=n(53959),a=n(259),l=n(47937),i=n(28629),o=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),c=n(259),u=(0,o.default)("users-subscription")},72905:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});let r=n(15933);function s(){let e=r._(["\nquery CheckConnection {\n  users(limit: 1) { id }\n}\n"]);return s=function(){return e},e}function a(){let e=r._(["\nsubscription CheckConnection {\n  users(limit: 1) { id }\n}\n"]);return a=function(){return e},e}Object.defineProperty(t,"__esModule",{value:!0}),t.CHECK_SUBSCRIPTION=t.CHECK_QUERY=void 0,t.ProxyCard=function(e){let n=(0,p.useTranslations)("proxy"),[r,s]=(0,d.useState)("connecting"),[a,c]=(0,d.useState)("connecting"),[x,g]=(0,d.useState)("connecting");(0,d.useEffect)(()=>{m("Checking GET /api/graphql"),fetch("/api/graphql").then(e=>{var t,n,r,a;return t=this,n=void 0,r=void 0,a=function*(){if(e.ok)if("ok"===(yield e.json()).status)m("GET /api/graphql successful"),s("connected");else throw Error("Invalid GET response format");else throw Error("GET request failed with status ".concat(e.status))},new(r||(r=Promise))(function(e,s){function l(e){try{o(a.next(e))}catch(e){s(e)}}function i(e){try{o(a.throw(e))}catch(e){s(e)}}function o(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(l,i)}o((a=a.apply(t,n||[])).next())})}).catch(e=>{m("Error checking GET /api/graphql:",e),s("error")})},[]);let{loading:f,error:v,data:j}=(0,u.useQuery)(t.CHECK_QUERY),{loading:b,error:C,data:y}=(0,u.useSubscription)(t.CHECK_SUBSCRIPTION);return(0,d.useEffect)(()=>{f?c("connecting"):v?(m("Error checking POST via useQuery:",v),c("error")):(null==j?void 0:j.users)?(m("POST check via useQuery successful"),c("connected")):(m("POST check via useQuery returned unexpected data:",j),c("error"))},[f,v,j]),(0,d.useEffect)(()=>{b?g("connecting"):C?(m("Error checking SOCKET via useSubscription:",C),g("error")):(null==y?void 0:y.users)&&(m("SOCKET check via useSubscription successful (data received)"),g("connected"))},[b,C,y]),(0,l.jsxs)(i.Card,Object.assign({},e,{children:[(0,l.jsx)(i.CardHeader,{children:(0,l.jsx)(i.CardTitle,{children:n("title")})}),(0,l.jsx)(i.CardContent,{children:(0,l.jsxs)("div",{className:"grid w-full items-center gap-4 mt-4",children:[(0,l.jsxs)(o.Label,{children:[n("get")," ",(0,l.jsx)(h.Status,{status:r})]}),(0,l.jsxs)(o.Label,{children:[n("post")," ",(0,l.jsx)(h.Status,{status:a})]}),(0,l.jsxs)(o.Label,{children:[n("socket")," ",(0,l.jsx)(h.Status,{status:x})]})]})})]}))};let l=n(95155),i=n(53959),o=n(34545),c=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),u=n(58753),d=n(12115),h=n(24646),p=n(259),m=(0,c.default)("proxy-card");t.CHECK_QUERY=(0,u.gql)(s()),t.CHECK_SUBSCRIPTION=(0,u.gql)(a())},78122:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UsersCard=function(e){u("Rendering UsersCard with tabs");let t=(0,c.useTranslations)("usersList");return(0,r.jsxs)(s.Card,Object.assign({},e,{children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{children:t("title")}),(0,r.jsx)(s.CardDescription,{children:t("description")})]}),(0,r.jsx)(s.CardContent,{children:(0,r.jsxs)(a.Tabs,{defaultValue:"query",children:[" ",(0,r.jsxs)(a.TabsList,{className:"grid w-full grid-cols-2",children:[" ",(0,r.jsx)(a.TabsTrigger,{value:"query",children:t("tabs.query")}),(0,r.jsx)(a.TabsTrigger,{value:"subscription",children:t("tabs.subscription")})]}),(0,r.jsx)(a.TabsContent,{value:"query",className:"mt-4",children:(0,r.jsx)(l.UsersQuery,{})}),(0,r.jsx)(a.TabsContent,{value:"subscription",className:"mt-4",children:(0,r.jsx)(i.UsersSubscription,{})})]})})]}))};let r=n(95155),s=n(53959),a=n(76862),l=n(38284),i=n(63985),o=function(e){return e&&e.__esModule?e:{default:e}}(n(74684)),c=n(259),u=(0,o.default)("users-card")},88671:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlock=function(e){let{value:t,language:n}=e,[i,o]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"relative rounded-md border bg-muted p-4 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)(a.Button,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:()=>{navigator.clipboard.writeText(t).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},"aria-label":"Copy code",children:i?(0,r.jsx)(l.Check,{className:"h-4 w-4 text-green-500"}):(0,r.jsx)(l.Clipboard,{className:"h-4 w-4"})}),(0,r.jsx)("pre",{children:(0,r.jsx)("code",{children:t})})]})};let r=n(95155),s=n(12115),a=n(51825),l=n(47937)},89391:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HasuraCard=function(e){let t=(0,c.useCheckConnection)(),n=(0,o.useTranslations)("hasura");return(0,o.useTranslations)("common"),(0,r.jsxs)(s.Card,Object.assign({},e,{children:[(0,r.jsx)(s.CardHeader,{children:(0,r.jsxs)(s.CardTitle,{children:[n("title")," ",(0,r.jsx)(i.Status,{status:t})]})}),(0,r.jsx)(s.CardContent,{children:(0,r.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,r.jsx)(l.Label,{children:n("requiredEnv")}),(0,r.jsx)(s.CardDescription,{children:n("public")}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(l.Label,{htmlFor:"NEXT_PUBLIC_HASURA_GRAPHQL_URL",children:"NEXT_PUBLIC_HASURA_GRAPHQL_URL"}),(0,r.jsx)(a.Input,{id:"NEXT_PUBLIC_HASURA_GRAPHQL_URL",disabled:!0,value:"https://hasura.deep.foundation/v1/graphql",className:""})]})]})})]}))};let r=n(95155),s=n(53959),a=n(1035),l=n(34545),i=n(24646),o=n(259),c=n(2569);(0,function(e){return e&&e.__esModule?e:{default:e}}(n(74684)).default)("hasura-card")}}]);