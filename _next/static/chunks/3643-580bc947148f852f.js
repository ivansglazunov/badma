"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3643],{151:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFilesStore=void 0,t.useFilesStore=(0,s(87657).create)((e,t)=>({uploadingFiles:[],addFile:t=>{let s=Math.random().toString(36).substr(2,9),l={id:s,name:t.name,size:t.size,progress:0,status:"uploading"};return e(e=>({uploadingFiles:[...e.uploadingFiles,l]})),s},updateProgress:(t,s)=>{e(e=>({uploadingFiles:e.uploadingFiles.map(e=>e.id===t?Object.assign(Object.assign({},e),{progress:s}):e)}))},completeUpload:(t,s)=>{e(e=>({uploadingFiles:e.uploadingFiles.map(e=>e.id===t?Object.assign(Object.assign({},e),{status:"completed",fileId:s}):e)}))},setError:(t,s)=>{e(e=>({uploadingFiles:e.uploadingFiles.map(e=>e.id===t?Object.assign(Object.assign({},e),{status:"error",error:s}):e)}))},removeFile:t=>{e(e=>({uploadingFiles:e.uploadingFiles.filter(e=>e.id!==t)}))},clearAll:()=>{e({uploadingFiles:[]})}}))},9049:(e,t,s)=>{t.r=void 0,t.r=(0,s(87657).create)((e,t)=>({choose:void 0,setChoose:t=>{e({choose:t})},toggleChoose:s=>{let{choose:l}=t();if(l){let t=l.includes(s)?l.filter(e=>e!==s):[...l,s];e({choose:t.length>0?t:void 0})}else e({choose:[s]})},addChoose:s=>{let{choose:l}=t();l?l.includes(s)||e({choose:[...l,s]}):e({choose:[s]})},removeChoose:s=>{let{choose:l}=t();if(l){let t=l.filter(e=>e!==s);e({choose:t.length>0?t:void 0})}},clearChoose:()=>{e({choose:void 0})},isChosen:e=>{let{choose:s}=t();return!!s&&s.includes(e)}}))},14286:function(e,t,s){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFilesUpload=t.useFilesStore=t.FilesZone=t.Files=void 0;var a=s(49993);Object.defineProperty(t,"Files",{enumerable:!0,get:function(){return l(a).default}});var r=s(74970);Object.defineProperty(t,"FilesZone",{enumerable:!0,get:function(){return l(r).default}});var n=s(151);Object.defineProperty(t,"useFilesStore",{enumerable:!0,get:function(){return n.useFilesStore}});var i=s(37999);Object.defineProperty(t,"useFilesUpload",{enumerable:!0,get:function(){return i.useFilesUpload}})},24646:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Status=function(e){let{status:t="connecting",label:s,error:i}=e,o=(0,r.useTranslations)("common"),u=s||o("loading"),d=s||o("yes"),c=s||o("error"),p=s||"Idle";return(0,l.jsxs)(l.Fragment,{children:["connecting"===t&&(0,l.jsxs)(a.Button,{variant:"ghost",className:"p-0",children:[(0,l.jsx)(n.Loader2,{className:"animate-spin mr-1"})," ",u]}),"connected"===t&&(0,l.jsxs)(a.Button,{variant:"ghost",className:"p-0",children:[(0,l.jsx)(n.Check,{className:"mr-1"})," ",d]}),"error"===t&&(0,l.jsxs)(a.Button,{variant:"ghost",className:"p-0",children:[(0,l.jsx)(n.X,{className:"mr-1"})," ",c]}),"idle"===t&&(0,l.jsxs)(a.Button,{variant:"ghost",className:"p-0",children:[(0,l.jsx)(n.X,{className:"mr-1"})," ",p]})]})};let l=s(95155),a=s(51825),r=s(259),n=s(47937)},37999:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useFilesUpload=function(){let{addFile:e,updateProgress:t,completeUpload:s,setError:r}=(0,a.useFilesStore)(),n=(0,l.useCallback)(s=>{s.forEach(s=>{let l=e(s),a=0,r=setInterval(()=>{(a+=15*Math.random())>=100&&(a=100,clearInterval(r)),t(l,a)},200)})},[e,t]);return{handleFilesSelected:n,handleUploadComplete:(0,l.useCallback)(e=>{let t=a.useFilesStore.getState().uploadingFiles.find(e=>"uploading"===e.status);t&&s(t.id,e)},[s]),handleUploadError:(0,l.useCallback)(e=>{let t=a.useFilesStore.getState().uploadingFiles.find(e=>"uploading"===e.status);t&&r(t.id,e)},[r])}};let l=s(12115),a=s(151)},49993:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{children:t,onFilesSelected:s,onUploadComplete:i,onUploadError:o,accept:u,multiple:d=!1,disabled:c=!1,className:p,dragActiveClassName:f}=e,[m,g]=(0,a.useState)(!1),h=(0,a.useRef)(null),x=(0,r.useTranslations)("files"),b=(0,a.useCallback)(e=>{var t,l,a,r;return t=this,l=void 0,a=void 0,r=function*(){if(!e||0===e.length)return;let t=Array.from(e);if(s&&s(t),i)for(let e=0;e<t.length;e++){let s=t[e];try{let e=new FormData;e.append("file",s),e.append("isPublic","false");let t=yield fetch("/api/files",{method:"POST",body:e});if(!t.ok)throw Error(x("status.error"));let l=yield t.json();i(l.file.id)}catch(e){console.error("Upload error:",e),o&&o(x("status.error"))}}},new(a||(a=Promise))(function(e,s){function n(e){try{o(r.next(e))}catch(e){s(e)}}function i(e){try{o(r.throw(e))}catch(e){s(e)}}function o(t){var s;t.done?e(t.value):((s=t.value)instanceof a?s:new a(function(e){e(s)})).then(n,i)}o((r=r.apply(t,l||[])).next())})},[s,i,o]),v=(0,a.useCallback)(()=>{!c&&h.current&&h.current.click()},[c]),j=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),F=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.items&&e.dataTransfer.items.length>0&&g(!0)},[]),y=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g(!1)},[]),N=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),g(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&b(e.dataTransfer.files)},[b]);return(0,l.jsxs)("div",{className:(0,n.cn)("relative",m&&f,p),onDragEnter:F,onDragLeave:y,onDragOver:j,onDrop:N,onClick:v,role:"button",tabIndex:c?-1:0,children:[(0,l.jsx)("input",{ref:h,type:"file",multiple:d,accept:u,className:"hidden",onChange:e=>b(e.target.files),disabled:c}),t]})};let l=s(95155),a=s(12115),r=s(259),n=s(27010)},74970:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){let{className:t,showCompleted:s=!0,onFileComplete:i,onRemove:o,renderRemoveButton:u}=e,d=(0,n.useTranslations)("files"),{uploadingFiles:c,removeFile:p}=(0,a.useFilesStore)(),f=s?c:c.filter(e=>"completed"!==e.status),m=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},g=e=>e.startsWith("image/")?"\uD83D\uDDBC️":e.startsWith("video/")?"\uD83C\uDFA5":e.startsWith("audio/")?"\uD83C\uDFB5":e.includes("pdf")?"\uD83D\uDCC4":e.includes("text/")?"\uD83D\uDCDD":e.includes("application/")?"\uD83D\uDCE6":"\uD83D\uDCC1",h=e=>{switch(e){case"uploading":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{switch(e){case"uploading":return d("status.uploading");case"completed":return d("status.completed");case"error":return d("status.error");default:return d("status.unknown")}};return 0===f.length?null:(0,l.jsx)("div",{className:(0,r.cn)("space-y-3",t),children:f.map(e=>(0,l.jsx)("div",{className:"bg-card rounded-lg border border-border p-4 hover:shadow-sm transition-shadow",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-start space-x-3 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-2xl flex-shrink-0",children:g("application/octet-stream")}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-foreground truncate",children:e.name}),e.fileId&&(0,l.jsxs)("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:["ID: ",e.fileId]})]}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:m(e.size)}),"uploading"===e.status&&(0,l.jsx)("div",{className:"w-full bg-muted rounded-full h-2 mb-2",children:(0,l.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})}),(0,l.jsx)("span",{className:(0,r.cn)("inline-flex px-2 py-1 text-xs font-semibold rounded-full",h(e.status)),children:x(e.status)}),"error"===e.status&&e.error&&(0,l.jsx)("div",{className:"text-xs text-red-600 mt-1",children:e.error})]})]}),u?u(e.id):(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),(null!=o?o:p)(e.id)},className:"text-muted-foreground hover:text-destructive transition-colors p-1",title:d("removeFile"),type:"button",children:"✕"})]})},e.id))})};let l=s(95155),a=s(151),r=s(27010),n=s(259)}}]);