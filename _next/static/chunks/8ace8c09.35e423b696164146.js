"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7564],{3826:(e,t,r)=>{r.r(t),r.d(t,{DefaultElement:()=>et,DefaultLeaf:()=>z,DefaultPlaceholder:()=>eL,DefaultText:()=>Y,Editable:()=>eM,NODE_TO_INDEX:()=>h.MB,NODE_TO_PARENT:()=>h.WQ,ReactEditor:()=>k,Slate:()=>eG,defaultScrollSelectionIntoView:()=>eq,useComposing:()=>eR,useEditor:()=>e$,useElement:()=>eh,useElementIf:()=>ef,useFocused:()=>eH,useReadOnly:()=>em,useSelected:()=>eY,useSlate:()=>ey,useSlateSelection:()=>eQ,useSlateSelector:()=>ek,useSlateStatic:()=>b,useSlateWithV:()=>ex,withReact:()=>eZ});var n=r(25959),a=r.n(n),i=r(45964),o=r.n(i),s=r(91959),l=r.n(s),d=r(12115),c=r(78048),u=r(86380),h=r(3981),f=r(28460),p=r(47650);function v(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,r){var n;return n=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===g(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=(0,d.createContext)(null),b=()=>{var e=(0,d.useContext)(E);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},k=h.wE;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var w=function(){},x=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",O=h.qx?d.useLayoutEffect:d.useEffect,S=["node"];function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var T={subtree:!0,childList:!0,characterData:!0},D=h.Ni?e=>{var{node:t}=e,r=v(e,S);if(!h.Ni)return null;var n=b(),a=function(){var e=(0,d.useRef)(!1);return(0,d.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}(),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:n}=e,a=!1,i=null,o=null,s=null,l=0,d=!1,c=()=>{var e=h.hK.get(t);if(h.hK.delete(t),e){var{selection:r}=t,n=(0,h.zh)(t,e);!n||r&&u.Range.equals(n,r)||u.Transforms.select(t,n)}},f=()=>{var e=h.FT.get(t);if(h.FT.delete(t),e){if(e.at){var r=u.Point.isPoint(e.at)?(0,h.CN)(t,e.at):(0,h.zh)(t,e.at);if(!r)return;var n=u.Editor.range(t,r);t.selection&&u.Range.equals(t.selection,n)||u.Transforms.select(t,r)}e.run()}},p=()=>{if(o&&(clearTimeout(o),o=null),s&&(clearTimeout(s),s=null),!b()&&!E())return void c();a||(a=!0,setTimeout(()=>a=!1)),E()&&(a="action");var e=t.selection&&u.Editor.rangeRef(t,t.selection,{affinity:"forward"});h.NH.set(t,t.marks),w("flush",h.FT.get(t),h.tv.get(t));for(var i=b();l=null==(p=h.tv.get(t))?void 0:p[0];){var l,p,v,g=h.fe.get(t);void 0!==g&&(h.fe.delete(t),t.marks=g),g&&!1===d&&(d=null);var m=(0,h.BA)(l);t.selection&&u.Range.equals(t.selection,m)||u.Transforms.select(t,m),l.diff.text?u.Editor.insertText(t,l.diff.text):u.Editor.deleteFragment(t),h.tv.set(t,null==(v=h.tv.get(t))?void 0:v.filter(e=>{var{id:t}=e;return t!==l.id})),(0,h.sh)(t,l)||(i=!1,h.FT.delete(t),h.NH.delete(t),a="action",h.hK.delete(t),r.cancel(),n.cancel(),null==e||e.unref())}var k=null==e?void 0:e.unref();if(!k||h.hK.get(t)||t.selection&&u.Range.equals(k,t.selection)||u.Transforms.select(t,k),E())return void f();i&&r(),r.flush(),n.flush(),c();var y=h.NH.get(t);h.NH.delete(t),void 0!==y&&(t.marks=y,t.onChange())},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=h.PH.get(t);if(r){if(b()||e){r.style.display="none";return}r.style.removeProperty("display")}},g=(e,r)=>{var n,a=null!=(n=h.tv.get(t))?n:[];h.tv.set(t,a);var i=u.Node.leaf(t,e),o=a.findIndex(t=>u.Path.equals(t.path,e));if(o<0){(0,h.y1)(i.text,r)&&a.push({path:e,diff:r,id:l++}),v();return}var s=(0,h.eX)(i.text,a[o].diff,r);if(!s){a.splice(o,1),v();return}a[o]=C(C({},a[o]),{},{diff:s})},m=function(e){var{at:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,h.hK.delete(t),r.cancel(),n.cancel(),E()&&p(),h.FT.set(t,{at:a,run:e}),s=setTimeout(p)},E=()=>!!h.FT.get(t),b=()=>{var e;return!!(null!=(e=h.tv.get(t))&&e.length)},y=e=>{h.hK.set(t,e),o&&(clearTimeout(o),o=null);var{selection:r}=t;if(e){var n=!r||!u.Path.equals(r.anchor.path,e.anchor.path),a=!r||!u.Path.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(n&&d||a)&&(d=!1),(n||b())&&(o=setTimeout(p,200))}},O=()=>{E()||(s=setTimeout(p))};return{flush:p,scheduleFlush:O,hasPendingDiffs:b,hasPendingAction:E,hasPendingChanges:()=>E()||b(),isFlushing:()=>a,handleUserSelect:y,handleCompositionEnd:e=>{i&&clearTimeout(i),i=setTimeout(()=>{h.BG.set(t,!1),p()},25)},handleCompositionStart:e=>{h.BG.set(t,!0),i&&(clearTimeout(i),i=null)},handleDOMBeforeInput:e=>{if(o&&(clearTimeout(o),o=null),!h.eA.get(t)){var{inputType:r}=e,n=null,a=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[i]=e.getTargetRanges();i&&(n=k.toSlateRange(t,i,{exactMatch:!1,suppressThrow:!0}));var s=k.getWindow(t).getSelection();if(!n&&s&&(i=s,n=k.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!=(N=n)?N:t.selection){var l=!0;if(r.startsWith("delete")){var c=r.endsWith("Backward")?"backward":"forward",[f,p]=u.Range.edges(n),[v,E]=u.Editor.leaf(t,f.path);if(u.Range.isExpanded(n)&&v.text.length===f.offset&&0===p.offset){var b=u.Editor.next(t,{at:f.path,match:u.Text.isText});b&&u.Path.equals(b[1],p.path)&&("backward"===c?(n={anchor:p,focus:p},f=p,[v,E]=b):(n={anchor:f,focus:f},p=f))}var w={text:"",start:f.offset,end:p.offset},S=h.tv.get(t),P=null==S?void 0:S.find(e=>u.Path.equals(e.path,E)),T=P?[P.diff,w]:[w];if(0===(0,h.dM)(v.text,...T).length&&(l=!1),u.Range.isExpanded(n)){if(l&&u.Path.equals(n.anchor.path,n.focus.path)){var D={path:n.anchor.path,offset:f.offset};return y(u.Editor.range(t,D,D)),g(n.anchor.path,{text:"",end:p.offset,start:f.offset})}return m(()=>u.Editor.deleteFragment(t,{direction:c}),{at:n})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return m(()=>u.Editor.deleteFragment(t),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:R}=n;if(l&&u.Range.isCollapsed(n)){var j=u.Node.leaf(t,R.path);if(R.offset<j.text.length)return g(R.path,{text:"",start:R.offset,end:R.offset+1})}return m(()=>u.Editor.deleteForward(t),{at:n});case"deleteContentBackward":var N,B,{anchor:F}=n,I=(0,h.T4)(i)?i.isCollapsed:!!(null!=(B=i)&&B.collapsed);if(l&&I&&u.Range.isCollapsed(n)&&F.offset>0)return g(F.path,{text:"",start:F.offset-1,end:F.offset});return m(()=>u.Editor.deleteBackward(t),{at:n});case"deleteEntireSoftLine":return m(()=>{u.Editor.deleteBackward(t,{unit:"line"}),u.Editor.deleteForward(t,{unit:"line"})},{at:n});case"deleteHardLineBackward":return m(()=>u.Editor.deleteBackward(t,{unit:"block"}),{at:n});case"deleteSoftLineBackward":return m(()=>u.Editor.deleteBackward(t,{unit:"line"}),{at:n});case"deleteHardLineForward":return m(()=>u.Editor.deleteForward(t,{unit:"block"}),{at:n});case"deleteSoftLineForward":return m(()=>u.Editor.deleteForward(t,{unit:"line"}),{at:n});case"deleteWordBackward":return m(()=>u.Editor.deleteBackward(t,{unit:"word"}),{at:n});case"deleteWordForward":return m(()=>u.Editor.deleteForward(t,{unit:"word"}),{at:n});case"insertLineBreak":return m(()=>u.Editor.insertSoftBreak(t),{at:n});case"insertParagraph":return m(()=>u.Editor.insertBreak(t),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(x(a))return m(()=>k.insertData(t,a),{at:n});var M=null!=a?a:"";if(h.fe.get(t)&&(M=M.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(M)&&(M=M.slice(0,-1)),M.includes("\n"))return m(()=>{var e=M.split("\n");e.forEach((r,n)=>{r&&u.Editor.insertText(t,r),n!==e.length-1&&u.Editor.insertSoftBreak(t)})},{at:n});if(u.Path.equals(n.anchor.path,n.focus.path)){var[L,W]=u.Range.edges(n),q={start:L.offset,end:W.offset,text:M};if(M&&d&&"insertCompositionText"===r){var A=d.start+d.text.search(/\S|$/);q.start+q.text.search(/\S|$/)===A+1&&q.end===d.start+d.text.length?(q.start-=1,d=null,O()):d=!1}else d="insertText"===r&&(null===d?q:!!(d&&u.Range.isCollapsed(n))&&d.end+d.text.length===L.offset&&C(C({},d),{},{text:d.text+M}));if(l){var z=t.selection;if(g(L.path,q),z){var K={path:L.path,offset:L.offset+M.length};m(()=>{u.Transforms.select(t,{anchor:K,focus:K})},{at:K})}return}}return m(()=>u.Editor.insertText(t,M),{at:n})}}}},handleKeyDown:e=>{b()||(v(!0),setTimeout(v))},handleDomMutations:e=>{if(!(b()||E())&&e.some(r=>(0,h.Yc)(t,r,e))){var r;null==(r=h.Bo.get(t))||r()}},handleInput:()=>{(E()||!b())&&p()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},r)));return!function(e,t,r){var[n]=(0,d.useState)(()=>new MutationObserver(t));O(()=>{n.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),()=>n.disconnect()},[n,e,r])}(t,i.handleDomMutations,T),h.P5.set(n,i.scheduleFlush),a&&i.flush(),i}:()=>null;function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var j=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,i=b(),o=k.findPath(i,a),s=u.Path.parent(o),l=!!r[h.nW];return i.isVoid(n)?d.createElement(F,{length:u.Node.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||i.isInline(n)||""!==u.Editor.string(i,s)?""===r.text?d.createElement(F,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement(N,{isTrailing:!0,text:r.text}):d.createElement(N,{text:r.text}):d.createElement(F,{isLineBreak:!0,isMarkPlaceholder:l})},N=e=>{var{text:t,isTrailing:r=!1}=e,n=(0,d.useRef)(null),a=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[i]=(0,d.useState)(a);return O(()=>{var e=a();n.current&&n.current.textContent!==e&&(n.current.textContent=e)}),d.createElement(B,{ref:n},i)},B=(0,d.memo)((0,d.forwardRef)((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children))),F=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:n=!1}=e,a={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return n&&(a["data-slate-mark-placeholder"]=!0),d.createElement("span",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a),h.Ni&&r?null:"\uFEFF",r?d.createElement("br",null):null)};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=300*!!h.Ni;function W(e){e.current&&(clearTimeout(e.current),e.current=null)}var q=e=>d.createElement(z,M({},e)),A=d.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderPlaceholder:i,renderLeaf:o=q,leafPosition:s}=e,l=b(),c=(0,d.useRef)(null),u=(0,d.useRef)(null),[p,v]=(0,d.useState)(!1),g=(0,d.useRef)(null),m=(0,d.useCallback)(e=>{if(!function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(c,null==e),null==e){var r;h.PH.delete(l),null==(r=t.onPlaceholderResize)||r.call(t,null)}else h.PH.set(l,e),c.current||(c.current=new(window.ResizeObserver||f.tb)(()=>{var r;null==(r=t.onPlaceholderResize)||r.call(t,e)})),c.current.observe(e),u.current=e},[u,t,l]),E=d.createElement(j,{isLast:r,leaf:t,parent:a,text:n}),k=!!t[h.Rx];if((0,d.useEffect)(()=>(k?g.current||(g.current=setTimeout(()=>{v(!0),g.current=null},L)):(W(g),v(!1)),()=>W(g)),[k,v]),k&&p){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:h._y?"inherit":void 0},contentEditable:!1,ref:m}};E=d.createElement(d.Fragment,null,E,i(y))}return o({attributes:{"data-slate-leaf":!0},children:E,leaf:t,text:n,leafPosition:s})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.Text.equals(t.leaf,e.leaf)&&t.leaf[h.Rx]===e.leaf[h.Rx]),z=e=>{var{attributes:t,children:r}=e;return d.createElement("span",M({},t),r)};function K(e,t){var r,[,n]=(0,d.useReducer)(e=>e+1,0),a=(0,d.useRef)(),i=(0,d.useRef)(()=>null),o=(0,d.useRef)(null);try{if(e!==i.current||a.current){var s=e();r=t(o.current,s)?o.current:s}else r=o.current}catch(e){throw a.current&&e instanceof Error&&(e.message+="\nThe error may be correlated with this previous error:\n".concat(a.current.stack,"\n\n")),e}return i.current=e,o.current=r,a.current=void 0,[r,(0,d.useCallback)(()=>{try{var e=i.current();if(t(o.current,e))return;o.current=e}catch(e){e instanceof Error?a.current=e:a.current=Error(String(e))}n()},[])]}var U=(0,d.createContext)({}),_=(e,t)=>{var r=b(),{decorate:n,addEventListener:a}=(0,d.useContext)(U),[i,o]=K(()=>{var t=k.findPath(r,e);return n([e,t])},u.Text.isText(e)?h.xd:h.wC);return O(()=>{var e=a(o);return o(),e},[a,o]),(0,d.useMemo)(()=>[...i,...t],[i,t])},H=e=>{var t=(0,d.useRef)(new Set),r=(0,d.useRef)(e);O(()=>{r.current=e,t.current.forEach(e=>e())},[e]);var n=(0,d.useCallback)(e=>r.current(e),[]),a=(0,d.useCallback)(e=>(t.current.add(e),()=>{t.current.delete(e)}),[]);return(0,d.useMemo)(()=>({decorate:n,addEventListener:a}),[n,a])};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var G=e=>d.createElement(Y,X({},e)),$=d.memo(e=>{for(var{decorations:t,isLast:r,parent:n,renderPlaceholder:a,renderLeaf:i,renderText:o=G,text:s}=e,l=b(),c=(0,d.useRef)(null),f=_(s,t),p=u.Text.decorations(s,f),v=k.findKey(l,s),g=[],m=0;m<p.length;m++){var{leaf:E,position:y}=p[m];g.push(d.createElement(A,{isLast:r&&m===p.length-1,key:"".concat(v.id,"-").concat(m),renderPlaceholder:a,leaf:E,leafPosition:y,text:s,parent:n,renderLeaf:i}))}var C=(0,d.useCallback)(e=>{var t=h.b0.get(l);e?(null==t||t.set(v,e),h._8.set(s,e),h.wc.set(e,s)):(null==t||t.delete(v),h._8.delete(s),c.current&&h.wc.delete(c.current)),c.current=e},[c,l,v,s]);return o({text:s,children:g,attributes:{"data-slate-node":"text",ref:C}})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&(0,h.xd)(t.decorations,e.decorations)),Y=e=>{var{attributes:t,children:r}=e;return d.createElement("span",X({},t),r)};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Z=e=>d.createElement(et,J({},e)),ee=d.memo(e=>{var{decorations:t,element:r,renderElement:n=Z,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}=e,c=b(),f=em(),p=c.isInline(r),v=_(r,t),g=k.findKey(c,r),m=(0,d.useCallback)(e=>{var t=h.b0.get(c);e?(null==t||t.set(g,e),h._8.set(r,e),h.wc.set(e,r)):(null==t||t.delete(g),h._8.delete(r))},[c,g,r]),E=ep({decorations:v,node:r,renderElement:n,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}),y={"data-slate-node":"element",ref:m};if(p&&(y["data-slate-inline"]=!0),!p&&u.Editor.hasInlines(c,r)){var C=u.Node.string(r),w=a()(C);"rtl"===w&&(y.dir=w)}if(u.Editor.isVoid(c,r)){y["data-slate-void"]=!0,!f&&p&&(y.contentEditable=!1);var[[x]]=u.Node.texts(r);E=d.createElement(p?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement($,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),h.MB.set(x,0),h.WQ.set(x,r)}return n({attributes:y,children:E,element:r})},(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&(0,h.wC)(e.decorations,t.decorations)),et=e=>{var{attributes:t,children:r,element:n}=e,a=b().isInline(n)?"span":"div";return d.createElement(a,J(J({},t),{},{style:{position:"relative"}}),r)};class er{constructor(e,t){var{chunkSize:r,debug:n}=t;m(this,"root",void 0),m(this,"chunkSize",void 0),m(this,"debug",void 0),m(this,"reachedEnd",void 0),m(this,"pointerChunk",void 0),m(this,"pointerIndex",void 0),m(this,"pointerIndexStack",void 0),m(this,"cachedPointerNode",void 0),this.root=e,this.chunkSize=r,this.debug=null!=n&&n,this.pointerChunk=e,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if("root"===this.pointerChunk.type)return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if("root"===this.pointerChunk.type){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(e){this.returnToPreviousLeaf(),this.insertAfter(e),this.readLeaf()}insertAfter(e){if(0!==e.length){for(var t=0,r=0;"chunk"===this.pointerChunk.type&&this.pointerIndex===this.pointerSiblings.length-1;){var n=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(n>0){var a=e.splice(0,n);this.rawInsertAfter(a,t)}this.exitChunk(),t++}if(0!==e.length){var i=this.savePointer(),o=null;if(this.readLeaf())for(;"chunk"===this.pointerChunk.type&&0===this.pointerIndex;){var s=Math.min(this.chunkSize-this.pointerSiblings.length,e.length);if(s>0){var l=e.splice(-s,s);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(l,r),o||(o=this.savePointer())}this.exitChunk(),r++}this.restorePointer(i);var d=Math.max(t,r);this.rawInsertAfter(e,d),o&&this.restorePointer(o),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,0===this.pointerSiblings.length&&"chunk"===this.pointerChunk.type?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var e=this.pointerChunk;"chunk"===e.type;e=e.parent)this.root.modifiedChunks.add(e)}get atStart(){return"root"===this.pointerChunk.type&&-1===this.pointerIndex}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||-1===this.pointerIndex?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(void 0!==this.cachedPointerNode)return this.cachedPointerNode;var e=this.getPointerNode();return this.cachedPointerNode=e,e}getChunkPath(e){for(var t=[],r=e;"chunk"===r.type;r=r.parent){var n=r.parent.children.indexOf(r);if(-1===n)return null;t.unshift(n)}return t}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(e){if("start"===e){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:t,node:r}=e,n=t.children.indexOf(r);if(-1===n)throw Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(t);if(!a)throw Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=t,this.pointerIndex=n,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(e){var t;if((null==(t=this.pointerNode)?void 0:t.type)!=="chunk")throw Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=e?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),0===this.pointerChunk.children.length)throw Error("Cannot enter empty chunk")}enterChunkUntilLeaf(e){for(;(null==(t=this.pointerNode)?void 0:t.type)==="chunk";){var t;this.enterChunk(e)}}exitChunk(){if("root"===this.pointerChunk.type)throw Error("Cannot exit root");var e=this.pointerChunk;this.pointerChunk=e.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(e,t){if(0!==e.length){for(var r=(e,t,n)=>{if(1===n)return e;for(var a=[],i=0;i<this.chunkSize;i++){var o=e.slice(i*n,(i+1)*n);if(0===o.length)break;var s={type:"chunk",key:new h.Uz,parent:t,children:[]};s.children=r(o,s,n/this.chunkSize),a.push(s)}return a},n=this.pointerSiblings.length+e.length,a=0,i=this.chunkSize;i<n;i*=this.chunkSize)a++;var o=Math.max(a,t),s=Math.pow(this.chunkSize,o),l=r(e,this.pointerChunk,s);this.pointerSiblings.splice(this.pointerIndex+1,0,...l),this.pointerIndex+=l.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var e=t=>{if("chunk"===t.type){var{parent:r,children:n}=t;if(!r.children.includes(t))throw Error("Debug: Chunk ".concat(t.key.id," has an incorrect parent property"));n.forEach(e)}};if(this.root.children.forEach(e),void 0!==this.cachedPointerNode&&this.cachedPointerNode!==this.getPointerNode())throw Error("Debug: The cached pointer is incorrect and has not been invalidated");var t=this.getChunkPath(this.pointerChunk);if(!t)throw Error("Debug: The pointer chunk is not connected to the root");if(!u.Path.equals(this.pointerIndexStack,t))throw Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(t.join(", "),"]"))}}}class en{constructor(e,t){m(this,"editor",void 0),m(this,"children",void 0),m(this,"cachedKeys",void 0),m(this,"pointerIndex",void 0),this.editor=e,this.children=t,this.cachedKeys=Array(t.length),this.pointerIndex=0}read(e){if(1===e)return[this.children[this.pointerIndex++]];var t=this.remaining(e);return this.pointerIndex+=e,t}remaining(e){return void 0===e?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+e)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(e,t){var r=this.children.indexOf(e,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var n=this.pointerIndex;n<this.children.length;n++){var a=this.children[n];if(this.findKey(a,n)===t)return n-this.pointerIndex}return -1}toChunkLeaves(e,t){return e.map((e,r)=>({type:"leaf",node:e,key:this.findKey(e,t+r),index:t+r}))}findKey(e,t){var r=this.cachedKeys[t];if(r)return r;var n=k.findKey(this.editor,e);return this.cachedKeys[t]=n,n}}var ea=(e,t)=>{var r,{chunkTree:n,children:a,chunkSize:i,rerenderChildren:o=[],onInsert:s,onUpdate:l,onIndexChange:d,debug:c}=t;n.modifiedChunks.clear();for(var u=new er(n,{chunkSize:i,debug:c}),h=new en(e,a);r=u.readLeaf();)if(function(){var e=h.lookAhead(r.node,r.key),t=e>0&&n.movedNodeKeys.has(r.key);if(-1===e||t)return u.remove(),1;var a=h.pointerIndex,i=h.read(e+1),c=i.pop();if(i.length){var f=h.toChunkLeaves(i,a);u.insertBefore(f),i.forEach((e,t)=>{null==s||s(e,a+t)})}var p=h.pointerIndex-1;r.node!==c&&(r.node=c,u.invalidateChunk(),null==l||l(c,p)),r.index!==p&&(r.index=p,null==d||d(c,p)),o.includes(p)&&u.invalidateChunk()}())continue;if(!h.reachedEnd){var f=h.remaining(),p=h.toChunkLeaves(f,h.pointerIndex);u.returnToPreviousLeaf(),u.insertAfter(p),f.forEach((e,t)=>{null==s||s(e,h.pointerIndex+t)})}n.movedNodeKeys.clear()};function ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var eo=new WeakMap,es=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=k.findKey(e,t),a=eo.get(n);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},eo.set(n,a)),r.reconcile&&ea(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({chunkTree:a,children:t.children},r.reconcile)),a},el=e=>{var{children:t}=e;return t},ed=e=>{var{root:t,ancestor:r,renderElement:n,renderChunk:a=el}=e;return r.children.map(e=>{if("chunk"===e.type){var i=e.key.id,o=a({highest:r===t,lowest:e.children.some(e=>"leaf"===e.type),attributes:{"data-slate-chunk":!0},children:d.createElement(ec,{root:t,ancestor:e,renderElement:n,renderChunk:a})});return d.createElement(d.Fragment,{key:i},o)}return n(e.node,e.index,e.key)})},ec=d.memo(ed,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),eu=(0,d.createContext)(null),eh=()=>{var e=(0,d.useContext)(eu);if(!e)throw Error("The `useElement` hook must be used inside `renderElement`.");return e},ef=()=>(0,d.useContext)(eu),ep=e=>{var{decorations:t,node:r,renderElement:n,renderChunk:a,renderPlaceholder:i,renderText:o,renderLeaf:s}=e,l=b();h.eA.set(l,!1);var c=!u.Editor.isEditor(r)&&u.Element.isElement(r)&&!l.isInline(r)&&u.Editor.hasInlines(l,r)?null:l.getChunkSize(r),f=!!c,{decorationsByChild:p,childrenToRedecorate:v}=ev(l,r,t);f||r.children.forEach((e,t)=>{h.MB.set(e,t),h.WQ.set(e,r)});var g=(0,d.useCallback)((e,t,r)=>{var c=null!=r?r:k.findKey(l,e);return d.createElement(eu.Provider,{key:"provider-".concat(c.id),value:e},d.createElement(ee,{decorations:p[t],element:e,key:c.id,renderElement:n,renderChunk:a,renderPlaceholder:i,renderLeaf:s,renderText:o}))},[l,p,n,a,i,s,o]),m=(e,t)=>{var n=k.findKey(l,e);return d.createElement($,{decorations:p[t],key:n.id,isLast:t===r.children.length-1,parent:r,renderPlaceholder:i,renderLeaf:s,renderText:o,text:e})};if(!f)return r.children.map((e,t)=>u.Text.isText(e)?m(e,t):g(e,t));var E=es(l,r,{reconcile:{chunkSize:c,rerenderChildren:v,onInsert:(e,t)=>{h.MB.set(e,t),h.WQ.set(e,r)},onUpdate:(e,t)=>{h.MB.set(e,t),h.WQ.set(e,r)},onIndexChange:(e,t)=>{h.MB.set(e,t)}}});return d.createElement(ed,{root:E,ancestor:E,renderElement:g,renderChunk:a})},ev=(e,t,r)=>{var n=(0,h.L6)(e,t,r),a=(0,d.useRef)(n).current,i=[];a.length=n.length;for(var o=0;o<n.length;o++){var s,l=n[o],c=null!=(s=a[o])?s:null;(0,h.wC)(c,l)||(a[o]=l,i.push(o))}return{decorationsByChild:a,childrenToRedecorate:i}},eg=(0,d.createContext)(!1),em=()=>(0,d.useContext)(eg),eE=(0,d.createContext)({}),eb=(e,t)=>e===t;function ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eb,{deferred:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,d.useContext)(eE);if(!n)throw Error("The `useSlateSelector` hook must be used inside the <Slate> component's context.");var{addEventListener:a}=n,i=b(),[o,s]=K((0,d.useCallback)(()=>e(i),[i,e]),t);return O(()=>{var e=a(s,{deferred:r});return s(),e},[a,s,r]),o}var ey=()=>{var{addEventListener:e}=(0,d.useContext)(eE),[,t]=(0,d.useReducer)(e=>e+1,0);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");return O(()=>e(t),[e]),b()},eC=new WeakMap,ew=e=>{var t=eC.get(e);if(t)return t;t={current:0},eC.set(e,t);var{onChange:r}=e;return e.onChange=e=>{t.current++,r(e)},t},ex=()=>{var e=ey(),t=(0,d.useMemo)(()=>ew(e),[e]);return{editor:e,v:t.current}},eO=(e,t)=>{var r=[],n=()=>{r=[]};return{registerMutations:n=>{if(t.current){var a=n.filter(t=>(0,h.Yc)(e,t,n));r.push(...a)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),n())},clear:n}},eS={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class eP extends d.Component{constructor(){super(...arguments),m(this,"context",null),m(this,"manager",null),m(this,"mutationObserver",null)}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null==(e=this.mutationObserver)||e.observe(t.current,eS)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=eO(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,n,a=null==(e=this.mutationObserver)?void 0:e.takeRecords();return null!=a&&a.length&&(null==(n=this.manager)||n.registerMutations(a)),null==(t=this.mutationObserver)||t.disconnect(),null==(r=this.manager)||r.restoreDOM(),null}componentDidUpdate(){var e;null==(e=this.manager)||e.clear(),this.observe()}componentWillUnmount(){var e;null==(e=this.mutationObserver)||e.disconnect()}render(){return this.props.children}}m(eP,"contextType",E);var eT=h.Ni?eP:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)},eD=(0,d.createContext)(!1),eR=()=>(0,d.useContext)(eD),ej=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],eN=["text"];function eB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(r),!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eI=e=>d.createElement(d.Fragment,null,ep(e)),eM=(0,d.forwardRef)((e,t)=>{var r=(0,d.useCallback)(e=>d.createElement(eL,eF({},e)),[]),{autoFocus:n,decorate:i=eW,onDOMBeforeInput:s,placeholder:c,readOnly:f=!1,renderElement:p,renderChunk:g,renderLeaf:m,renderText:E,renderPlaceholder:y=r,scrollSelectionIntoView:C=eq,style:w={},as:x="div",disableDefaultStyles:S=!1}=e,P=v(e,ej),T=ey(),[R,j]=(0,d.useState)(!1),N=(0,d.useRef)(null),B=(0,d.useRef)([]),[F,I]=(0,d.useState)(),M=(0,d.useRef)(!1),{onUserInput:L,receivedUserInput:W}=function(){var e=b(),t=(0,d.useRef)(!1),r=(0,d.useRef)(0),n=(0,d.useCallback)(()=>{if(!t.current){t.current=!0;var n=k.getWindow(e);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame(()=>{t.current=!1})}},[e]);return(0,d.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:t,onUserInput:n}}(),[,q]=(0,d.useReducer)(e=>e+1,0);h.Bo.set(T,q),h.dY.set(T,f);var A=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{N.current&&n&&N.current.focus()},[n]);var z=(0,d.useRef)(),K=(0,d.useMemo)(()=>l()(()=>{if(h.eA.get(T))return void K();var e=k.toDOMNode(T,T).getRootNode();if(!M.current&&h._y&&e instanceof ShadowRoot){M.current=!0,(0,h.bq)()?document.execCommand("indent"):u.Transforms.deselect(T),M.current=!1;return}var t=z.current;if((h.Ni||!k.isComposing(T))&&(!A.isUpdatingSelection||null!=t&&t.isFlushing())&&!A.isDraggingInternally){var r=k.findDocumentOrShadowRoot(T),{activeElement:n}=r,a=k.toDOMNode(T,T),i=(0,h.Lo)(r);if(n===a?(A.latestElement=n,h.Rf.set(T,!0)):h.Rf.delete(T),!i)return u.Transforms.deselect(T);var{anchorNode:o,focusNode:s}=i,l=k.hasEditableTarget(T,o)||k.isTargetInsideNonReadonlyVoid(T,o),d=k.hasTarget(T,s);if(l&&d){var c=k.toSlateRange(T,i,{exactMatch:!1,suppressThrow:!0});c&&(k.isComposing(T)||null!=t&&t.hasPendingChanges()||null!=t&&t.isFlushing()?null==t||t.handleUserSelect(c):u.Transforms.select(T,c))}!f||l&&d||u.Transforms.deselect(T)}},100),[T,f,A]),_=(0,d.useMemo)(()=>o()(K,0),[K]);z.current=D({node:N,onDOMSelectionChange:K,scheduleOnDOMSelectionChange:_}),O(()=>{N.current&&(r=(0,h.j$)(N.current))?(h.ty.set(T,r),h.Vh.set(T,N.current),h._8.set(T,N.current),h.wc.set(N.current,T)):h._8.delete(T);var e,t,r,{selection:n}=T,a=k.findDocumentOrShadowRoot(T),i=(0,h.Lo)(a);if(!(!i||!k.isFocused(T)||null!=(e=z.current)&&e.hasPendingAction())){var o=e=>{var t="None"!==i.type;if(n||t){var r=i.focusNode;if(h.$M&&i.rangeCount>1){var a=i.getRangeAt(0),o=i.getRangeAt(i.rangeCount-1);d=a.startContainer===r?o.endContainer:a.startContainer}else d=i.anchorNode;var s=h.Vh.get(T),l=!1;if(s.contains(d)&&s.contains(r)&&(l=!0),t&&l&&n&&!e){var d,c,f=k.toSlateRange(T,i,{exactMatch:!0,suppressThrow:!0});if(f&&u.Range.equals(f,n)&&(!A.hasMarkPlaceholder||null!=(c=d)&&null!=(c=c.parentElement)&&c.hasAttribute("data-slate-mark-placeholder")))return}if(n&&!k.hasRange(T,n)){T.selection=k.toSlateRange(T,i,{exactMatch:!1,suppressThrow:!0});return}A.isUpdatingSelection=!0;var p=null;try{p=n&&k.toDOMRange(T,n)}catch(e){}return p?(k.isComposing(T)&&!h.Ni?i.collapseToEnd():u.Range.isBackward(n)?i.setBaseAndExtent(p.endContainer,p.endOffset,p.startContainer,p.startOffset):i.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),C(T,p)):i.removeAllRanges(),p}};i.rangeCount<=1&&o();var s=(null==(t=z.current)?void 0:t.isFlushing())==="action";if(!h.Ni||!s)return void setTimeout(()=>{A.isUpdatingSelection=!1});var l=null,d=requestAnimationFrame(()=>{if(s){var e=e=>{try{k.toDOMNode(T,T).focus(),o(e)}catch(e){}};e(),l=setTimeout(()=>{e(!0),A.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(d),l&&clearTimeout(l)}}});var V=(0,d.useCallback)(e=>{eU(T,e);var t=k.toDOMNode(T,T).getRootNode();if(null!=M&&M.current&&h._y&&t instanceof ShadowRoot){var r=e.getTargetRanges()[0],n=new window.Range;n.setStart(r.startContainer,r.startOffset),n.setEnd(r.endContainer,r.endOffset);var a=k.toSlateRange(T,n,{exactMatch:!1,suppressThrow:!1});u.Transforms.select(T,a),e.preventDefault(),e.stopImmediatePropagation();return}if(L(),!f&&k.hasEditableTarget(T,e.target)&&!eK(e,s)){if(z.current)return z.current.handleDOMBeforeInput(e);_.flush(),K.flush();var{selection:i}=T,{inputType:o}=e,l=e.dataTransfer||e.data||void 0,d="insertCompositionText"===o||"deleteCompositionText"===o;if(d&&k.isComposing(T))return;var c=!1;if("insertText"===o&&i&&u.Range.isCollapsed(i)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==i.anchor.offset&&(c=!0,T.marks&&(c=!1),!h.eA.get(T))){var{anchor:p}=i,[v,g]=k.toDOMPoint(T,p),m=null==(y=v.parentElement)?void 0:y.closest("a"),E=k.getWindow(T);if(c&&m&&k.hasDOMNode(T,m)){var b,y,C,w,x=null==E?void 0:E.document.createTreeWalker(m,NodeFilter.SHOW_TEXT).lastChild();x===v&&(null==(w=x.textContent)?void 0:w.length)===g&&(c=!1)}if(c&&v.parentElement&&(null==E||null==(C=E.getComputedStyle(v.parentElement))?void 0:C.whiteSpace)==="pre"){var O=u.Editor.above(T,{at:p.path,match:e=>u.Element.isElement(e)&&u.Editor.isBlock(T,e)});O&&u.Node.string(O[0]).includes("	")&&(c=!1)}}if((!o.startsWith("delete")||o.startsWith("deleteBy"))&&!h.eA.get(T)){var[S]=e.getTargetRanges();if(S){var P=k.toSlateRange(T,S,{exactMatch:!1,suppressThrow:!1});if(!i||!u.Range.equals(i,P)){c=!1;var D=!d&&T.selection&&u.Editor.rangeRef(T,T.selection);u.Transforms.select(T,P),D&&h.zk.set(T,D)}}}if(d)return;if(c||e.preventDefault(),i&&u.Range.isExpanded(i)&&o.startsWith("delete")){var R=o.endsWith("Backward")?"backward":"forward";u.Editor.deleteFragment(T,{direction:R});return}switch(o){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.Editor.deleteFragment(T);break;case"deleteContent":case"deleteContentForward":u.Editor.deleteForward(T);break;case"deleteContentBackward":u.Editor.deleteBackward(T);break;case"deleteEntireSoftLine":u.Editor.deleteBackward(T,{unit:"line"}),u.Editor.deleteForward(T,{unit:"line"});break;case"deleteHardLineBackward":u.Editor.deleteBackward(T,{unit:"block"});break;case"deleteSoftLineBackward":u.Editor.deleteBackward(T,{unit:"line"});break;case"deleteHardLineForward":u.Editor.deleteForward(T,{unit:"block"});break;case"deleteSoftLineForward":u.Editor.deleteForward(T,{unit:"line"});break;case"deleteWordBackward":u.Editor.deleteBackward(T,{unit:"word"});break;case"deleteWordForward":u.Editor.deleteForward(T,{unit:"word"});break;case"insertLineBreak":u.Editor.insertSoftBreak(T);break;case"insertParagraph":u.Editor.insertBreak(T);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===o&&k.isComposing(T)&&(j(!1),h.BG.set(T,!1)),(null==l?void 0:l.constructor.name)==="DataTransfer"?k.insertData(T,l):"string"==typeof l&&(c?B.current.push(()=>u.Editor.insertText(T,l)):u.Editor.insertText(T,l))}var N=null==(b=h.zk.get(T))?void 0:b.unref();h.zk.delete(T),!N||T.selection&&u.Range.equals(T.selection,N)||u.Transforms.select(T,N)}},[T,K,L,s,f,_]),X=(0,d.useCallback)(e=>{null==e?(K.cancel(),_.cancel(),h.Vh.delete(T),h._8.delete(T),N.current&&h.MX&&N.current.removeEventListener("beforeinput",V)):h.MX&&e.addEventListener("beforeinput",V),N.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[K,_,T,V,t]);O(()=>{var e=k.getWindow(T),t=e=>{var{target:t}=e,r=t instanceof HTMLElement?t:null,n=null==r?void 0:r.tagName;"INPUT"!==n&&"TEXTAREA"!==n&&_()};e.document.addEventListener("selectionchange",t);var r=()=>{A.isDraggingInternally=!1};return e.document.addEventListener("dragend",r),e.document.addEventListener("drop",r),()=>{e.document.removeEventListener("selectionchange",t),e.document.removeEventListener("dragend",r),e.document.removeEventListener("drop",r)}},[_,A]);var G=i([T,[]]),$=H(i),Y=c&&1===T.children.length&&1===Array.from(u.Node.texts(T)).length&&""===u.Node.string(T)&&!R,Q=(0,d.useCallback)(e=>{if(e&&Y){var t;I(null==(t=e.getBoundingClientRect())?void 0:t.height)}else I(void 0)},[Y]);if(Y){var J=u.Editor.start(T,[]);G.push({[h.Rx]:!0,placeholder:c,onPlaceholderResize:Q,anchor:J,focus:J})}var{marks:Z}=T;if(A.hasMarkPlaceholder=!1,T.selection&&u.Range.isCollapsed(T.selection)&&Z){var{anchor:ee}=T.selection,et=u.Node.leaf(T,ee.path),er=v(et,eN);if(!u.Text.equals(et,Z,{loose:!0})){A.hasMarkPlaceholder=!0;var en=Object.fromEntries(Object.keys(er).map(e=>[e,null]));G.push(eF(eF(eF({[h.nW]:!0},en),Z),{},{anchor:ee,focus:ee}))}}return(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=T;if(e){var{anchor:t}=e,r=u.Node.leaf(T,t.path);if(Z&&!u.Text.equals(r,Z,{loose:!0}))return void h.fe.set(T,Z)}h.fe.delete(T)})}),!function(){var{flushDeferred:e}=(0,d.useContext)(eE);O(e)}(),d.createElement(eg.Provider,{value:f},d.createElement(eD.Provider,{value:R},d.createElement(U.Provider,{value:$},d.createElement(eT,{node:N,receivedUserInput:W},d.createElement(x,eF(eF({role:f?void 0:"textbox","aria-multiline":!f||void 0},P),{},{spellCheck:(!!h.MX||!h.qx)&&P.spellCheck,autoCorrect:h.MX||!h.qx?P.autoCorrect:"false",autoCapitalize:h.MX||!h.qx?P.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!f,zindex:-1,suppressContentEditableWarning:!0,ref:X,style:eF(eF({},S?{}:eF({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},F?{minHeight:F}:{})),w),onBeforeInput:(0,d.useCallback)(e=>{if(!h.MX&&!f&&!eA(e,P.onBeforeInput)&&k.hasSelectableTarget(T,e.target)&&(e.preventDefault(),!k.isComposing(T))){var t=e.data;u.Editor.insertText(T,t)}},[P.onBeforeInput,T,f]),onInput:(0,d.useCallback)(e=>{if(!eA(e,P.onInput)){if(z.current)return void z.current.handleInput();for(var t of B.current)t();B.current=[],k.isFocused(T)||eU(T,e.nativeEvent)}},[P.onInput,T]),onBlur:(0,d.useCallback)(e=>{if(f||A.isUpdatingSelection||!k.hasSelectableTarget(T,e.target)||eA(e,P.onBlur))return;var t=k.findDocumentOrShadowRoot(T);if(A.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==k.toDOMNode(T,T)&&!((0,h.Fe)(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&(0,h.vA)(r)&&k.hasDOMNode(T,r)){var n=k.toSlateNode(T,r);if(u.Element.isElement(n)&&!T.isVoid(n))return}if(h._y){var a=(0,h.Lo)(t);null==a||a.removeAllRanges()}h.Rf.delete(T)}}},[f,A.isUpdatingSelection,A.latestElement,T,P.onBlur]),onClick:(0,d.useCallback)(e=>{if(k.hasTarget(T,e.target)&&!eA(e,P.onClick)&&(0,h.vA)(e.target)){var t=k.toSlateNode(T,e.target),r=k.findPath(T,t);if(u.Editor.hasPath(T,r)&&u.Node.get(T,r)===t){if(e.detail===h.CT&&r.length>=1){var n=r;if(!(u.Element.isElement(t)&&u.Editor.isBlock(T,t))){var a,i=u.Editor.above(T,{match:e=>u.Element.isElement(e)&&u.Editor.isBlock(T,e),at:r});n=null!=(a=null==i?void 0:i[1])?a:r.slice(0,1)}var o=u.Editor.range(T,n);u.Transforms.select(T,o);return}if(!f){var s=u.Editor.start(T,r),l=u.Editor.end(T,r),d=u.Editor.void(T,{at:s}),c=u.Editor.void(T,{at:l});if(d&&c&&u.Path.equals(d[1],c[1])){var p=u.Editor.range(T,s);u.Transforms.select(T,p)}}}}},[T,P.onClick,f]),onCompositionEnd:(0,d.useCallback)(e=>{if(k.hasSelectableTarget(T,e.target)){var t;if(k.isComposing(T)&&Promise.resolve().then(()=>{j(!1),h.BG.set(T,!1)}),null==(t=z.current)||t.handleCompositionEnd(e),!eA(e,P.onCompositionEnd)&&!h.Ni&&!h._y&&!h.Hq&&!h.pz&&!h.KW&&!h.$Z&&e.data){var r=h.fe.get(T);h.fe.delete(T),void 0!==r&&(h.NH.set(T,T.marks),T.marks=r),u.Editor.insertText(T,e.data);var n=h.NH.get(T);h.NH.delete(T),void 0!==n&&(T.marks=n)}}},[P.onCompositionEnd,T]),onCompositionUpdate:(0,d.useCallback)(e=>{!k.hasSelectableTarget(T,e.target)||eA(e,P.onCompositionUpdate)||k.isComposing(T)||(j(!0),h.BG.set(T,!0))},[P.onCompositionUpdate,T]),onCompositionStart:(0,d.useCallback)(e=>{if(k.hasSelectableTarget(T,e.target)&&(null==(t=z.current)||t.handleCompositionStart(e),!eA(e,P.onCompositionStart)&&!h.Ni)){j(!0);var t,{selection:r}=T;if(r&&u.Range.isExpanded(r))return void u.Editor.deleteFragment(T)}},[P.onCompositionStart,T]),onCopy:(0,d.useCallback)(e=>{!k.hasSelectableTarget(T,e.target)||eA(e,P.onCopy)||ez(e)||(e.preventDefault(),k.setFragmentData(T,e.clipboardData,"copy"))},[P.onCopy,T]),onCut:(0,d.useCallback)(e=>{if(!f&&k.hasSelectableTarget(T,e.target)&&!eA(e,P.onCut)&&!ez(e)){e.preventDefault(),k.setFragmentData(T,e.clipboardData,"cut");var{selection:t}=T;if(t)if(u.Range.isExpanded(t))u.Editor.deleteFragment(T);else{var r=u.Node.parent(T,t.anchor.path);u.Editor.isVoid(T,r)&&u.Transforms.delete(T)}}},[f,T,P.onCut]),onDragOver:(0,d.useCallback)(e=>{if(k.hasTarget(T,e.target)&&!eA(e,P.onDragOver)){var t=k.toSlateNode(T,e.target);u.Element.isElement(t)&&u.Editor.isVoid(T,t)&&e.preventDefault()}},[P.onDragOver,T]),onDragStart:(0,d.useCallback)(e=>{if(!f&&k.hasTarget(T,e.target)&&!eA(e,P.onDragStart)){var t=k.toSlateNode(T,e.target),r=k.findPath(T,t);if(u.Element.isElement(t)&&u.Editor.isVoid(T,t)||u.Editor.void(T,{at:r,voids:!0})){var n=u.Editor.range(T,r);u.Transforms.select(T,n)}A.isDraggingInternally=!0,k.setFragmentData(T,e.dataTransfer,"drag")}},[f,T,P.onDragStart,A]),onDrop:(0,d.useCallback)(e=>{if(!f&&k.hasTarget(T,e.target)&&!eA(e,P.onDrop)){e.preventDefault();var t=T.selection,r=k.findEventRange(T,e),n=e.dataTransfer;u.Transforms.select(T,r),A.isDraggingInternally&&t&&!u.Range.equals(t,r)&&!u.Editor.void(T,{at:r,voids:!0})&&u.Transforms.delete(T,{at:t}),k.insertData(T,n),k.isFocused(T)||k.focus(T)}},[f,T,P.onDrop,A]),onDragEnd:(0,d.useCallback)(e=>{!f&&A.isDraggingInternally&&P.onDragEnd&&k.hasTarget(T,e.target)&&P.onDragEnd(e)},[f,A,P,T]),onFocus:(0,d.useCallback)(e=>{if(!f&&!A.isUpdatingSelection&&k.hasEditableTarget(T,e.target)&&!eA(e,P.onFocus)){var t=k.toDOMNode(T,T);if(A.latestElement=k.findDocumentOrShadowRoot(T).activeElement,h.$M&&e.target!==t)return void t.focus();h.Rf.set(T,!0)}},[f,A,T,P.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!f&&k.hasEditableTarget(T,e.target)){null==(t=z.current)||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(k.isComposing(T)&&!1===r.isComposing&&(h.BG.set(T,!1),j(!1)),!(eA(e,P.onKeyDown)||k.isComposing(T))){var{selection:n}=T,i=T.children[null!==n?n.focus.path[0]:0],o="rtl"===a()(u.Node.string(i));if(h.qW.isRedo(r)){e.preventDefault(),"function"==typeof T.redo&&T.redo();return}if(h.qW.isUndo(r)){e.preventDefault(),"function"==typeof T.undo&&T.undo();return}if(h.qW.isMoveLineBackward(r)){e.preventDefault(),u.Transforms.move(T,{unit:"line",reverse:!0});return}if(h.qW.isMoveLineForward(r)){e.preventDefault(),u.Transforms.move(T,{unit:"line"});return}if(h.qW.isExtendLineBackward(r)){e.preventDefault(),u.Transforms.move(T,{unit:"line",edge:"focus",reverse:!0});return}if(h.qW.isExtendLineForward(r)){e.preventDefault(),u.Transforms.move(T,{unit:"line",edge:"focus"});return}if(h.qW.isMoveBackward(r)){e.preventDefault(),n&&u.Range.isCollapsed(n)?u.Transforms.move(T,{reverse:!o}):u.Transforms.collapse(T,{edge:o?"end":"start"});return}if(h.qW.isMoveForward(r)){e.preventDefault(),n&&u.Range.isCollapsed(n)?u.Transforms.move(T,{reverse:o}):u.Transforms.collapse(T,{edge:o?"start":"end"});return}if(h.qW.isMoveWordBackward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)&&u.Transforms.collapse(T,{edge:"focus"}),u.Transforms.move(T,{unit:"word",reverse:!o});return}if(h.qW.isMoveWordForward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)&&u.Transforms.collapse(T,{edge:"focus"}),u.Transforms.move(T,{unit:"word",reverse:o});return}if(h.MX){if((h.G_||h._y)&&n&&(h.qW.isDeleteBackward(r)||h.qW.isDeleteForward(r))&&u.Range.isCollapsed(n)){var s=u.Node.parent(T,n.anchor.path);if(u.Element.isElement(s)&&u.Editor.isVoid(T,s)&&(u.Editor.isInline(T,s)||u.Editor.isBlock(T,s))){e.preventDefault(),u.Editor.deleteBackward(T,{unit:"block"});return}}}else{if(h.qW.isBold(r)||h.qW.isItalic(r)||h.qW.isTransposeCharacter(r))return void e.preventDefault();if(h.qW.isSoftBreak(r)){e.preventDefault(),u.Editor.insertSoftBreak(T);return}if(h.qW.isSplitBlock(r)){e.preventDefault(),u.Editor.insertBreak(T);return}if(h.qW.isDeleteBackward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"backward"}):u.Editor.deleteBackward(T);return}if(h.qW.isDeleteForward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"forward"}):u.Editor.deleteForward(T);return}if(h.qW.isDeleteLineBackward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"backward"}):u.Editor.deleteBackward(T,{unit:"line"});return}if(h.qW.isDeleteLineForward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"forward"}):u.Editor.deleteForward(T,{unit:"line"});return}if(h.qW.isDeleteWordBackward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"backward"}):u.Editor.deleteBackward(T,{unit:"word"});return}if(h.qW.isDeleteWordForward(r)){e.preventDefault(),n&&u.Range.isExpanded(n)?u.Editor.deleteFragment(T,{direction:"forward"}):u.Editor.deleteForward(T,{unit:"word"});return}}}}},[f,T,P.onKeyDown]),onPaste:(0,d.useCallback)(e=>{!f&&k.hasEditableTarget(T,e.target)&&!eA(e,P.onPaste)&&(!h.MX||(0,h.ts)(e.nativeEvent)||h._y)&&(e.preventDefault(),k.insertData(T,e.clipboardData))},[f,T,P.onPaste])}),d.createElement(eI,{decorations:G,node:T,renderElement:p,renderChunk:g,renderPlaceholder:y,renderLeaf:m,renderText:E}))))))}),eL=e=>{var{attributes:t,children:r}=e;return d.createElement("span",eF({},t),r,h.Ni&&d.createElement("br",null))},eW=()=>[],eq=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.Range.isCollapsed(e.selection))){var r=t.startContainer.parentElement,n=t.getBoundingClientRect();if(0===n.width&&0===n.height&&0===n.x&&0===n.y){var a=r.getBoundingClientRect();if(a.width>0||a.height>0)return}r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.A)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},eA=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},ez=e=>(0,h.vA)(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),eK=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},eU=(e,t)=>"historyUndo"===t.inputType&&"function"==typeof e.undo?void e.undo():"historyRedo"===t.inputType&&"function"==typeof e.redo?void e.redo():void 0,e_=(0,d.createContext)(!1),eH=()=>(0,d.useContext)(e_),eV=parseInt(d.version.split(".")[0],10),eX=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],eG=e=>{var{editor:t,children:r,onChange:n,onSelectionChange:a,onValueChange:i,initialValue:o}=e,s=v(e,eX);d.useState(()=>{if(!u.Node.isNodeList(o))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(u.Scrubber.stringify(o)));if(!u.Editor.isEditor(t))throw Error("[Slate] editor is invalid! You passed: ".concat(u.Scrubber.stringify(t)));t.children=o,Object.assign(t,s)});var{selectorContext:l,onChange:c}=function(){var e=(0,d.useRef)(new Set),t=(0,d.useRef)(new Set),r=(0,d.useCallback)(()=>{e.current.forEach(e=>e())},[]),n=(0,d.useCallback)(()=>{t.current.forEach(e=>e()),t.current.clear()},[]),a=(0,d.useCallback)(function(r){var{deferred:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n?()=>t.current.add(r):r;return e.current.add(a),()=>{e.current.delete(a)}},[]);return{selectorContext:(0,d.useMemo)(()=>({addEventListener:a,flushDeferred:n}),[a,n]),onChange:r}}(),f=(0,d.useCallback)(e=>{var r;n&&n(t.children),(null==e||null==(r=e.operation)?void 0:r.type)==="set_selection"?null==a||a(t.selection):null==i||i(t.children),c()},[t,c,n,a,i]);(0,d.useEffect)(()=>(h.zJ.set(t,f),()=>{h.zJ.set(t,()=>{})}),[t,f]);var[p,g]=(0,d.useState)(k.isFocused(t));return(0,d.useEffect)(()=>{g(k.isFocused(t))},[t]),O(()=>{var e=()=>g(k.isFocused(t));return eV>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),d.createElement(eE.Provider,{value:l},d.createElement(E.Provider,{value:t},d.createElement(e_.Provider,{value:p},r)))},e$=()=>{var e=(0,d.useContext)(E);if(!e)throw Error("The `useEditor` hook must be used inside the <Slate> component's context.");return e},eY=()=>{var e=ef();return!!e&&ek((0,d.useCallback)(t=>{if(!t.selection)return!1;var r=k.findPath(t,e),n=u.Editor.range(t,r);return!!u.Range.intersection(n,t.selection)},[e]),void 0,{deferred:!0})},eQ=()=>ek(e=>e.selection,eJ),eJ=(e,t)=>!e&&!t||!!e&&!!t&&u.Range.equals(e,t),eZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{onChange:n,apply:a,insertText:i}=r=(0,h.Hk)(r,t);return r.getChunkSize=()=>null,h.Ni&&(r.insertText=(e,t)=>(h.hK.delete(r),i(e,t))),r.onChange=e=>{(eV<18?p.unstable_batchedUpdates:e=>e())(()=>{n(e)})},r.apply=e=>{if("move_node"===e.type){var t=u.Node.parent(r,e.path);if(r.getChunkSize(t)){var n=u.Node.get(r,e.path),i=es(r,t),o=k.findKey(r,n);i.movedNodeKeys.add(o)}}a(e)},r}}}]);