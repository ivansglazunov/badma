# Perks View Implementation Tasks

## Этап 1: Базовая разметка
- [x] Удалить созданный perk-cards.tsx
- [x] Убрать импорт PerkCards из lib/game.tsx
- [x] Убрать старую кнопку тестирования из lib/game.tsx
- [x] Добавить простую разметку перков по нижней грани экрана
- [x] Использовать flex с центрированием для правильного расположения
- [x] Каждый перк в div 1px/1px с absolute позиционированием и translate(-50%, -50%)
- [x] Проверить визуальное расположение перков

## Этап 2: Базовая анимация
- [x] Добавить motion.div для каждого перка
- [x] Реализовать drag functionality только по всем осям
- [x] При отпускании карта должна пружинить обратно на исходную позицию
- [x] Проверить что карты корректно возвращаются на место

## Этап 3: Логика активации
- [x] Добавить состояние activePerk для отслеживания выбранного перка
- [x] Добавить проверку позиции при отпускании (40% threshold)
- [x] Если отпустили выше 40% от нижней границы экрана - закрепить в центре
- [x] Карта в центре должна иметь translate(-50%, -50%)
- [x] Сохранить упругость для центральной позиции
- [x] Заблокировать drag остальных карт когда один перк активен
- [ ] Проверить корректную работу активации

## Этап 4: Логика деактивации
- [ ] Добавить проверку для деактивации
- [ ] Если активную карту опустили ниже 30% от нижней границы - вернуть в строй
- [ ] Убрать маркер выделенной карты
- [ ] Проверить корректную работу деактивации

## Этап 5: Применение перков
- [x] Добавить абстрактный метод handleApply в ChessPerk
- [x] Реализовать handleApply в MinefieldPerk с вызовом asyncPerk
- [x] Добавить состояние availablePerks для отслеживания доступных перков
- [x] Добавить клик по активной карте для применения перка
- [x] Удаление перка из UI после успешного применения
- [x] Интеграция с существующей системой перков
- [ ] Финальное тестирование

## Технические детали:
- Использовать PERK_TYPES из lib/items.tsx
- Каждый перк рендерить через perk.ItemComponent
- Позиционирование: нижняя граница экрана, центрирование по горизонтали
- Motion: spring анимации с возвратом на исходную позицию
- Пороги: 40% для активации, 30% для деактивации
